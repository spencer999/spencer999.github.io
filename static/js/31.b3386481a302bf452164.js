webpackJsonp([31],{1012:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"p-20"},[i("div",{staticClass:"filter-container",staticStyle:{"margin-bottom":"20px"}},[i("el-input",{staticClass:"filter-item",staticStyle:{width:"300px"},attrs:{placeholder:"请输入会员UID、手机号码"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13))return null;t.handleFilter(e)}},model:{value:t.listQuery.nameUidNum,callback:function(e){t.listQuery.nameUidNum=e},expression:"listQuery.nameUidNum"}}),t._v(" "),i("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"30px"},attrs:{size:"small"},on:{click:t.handleFilter}},[t._v("查询")]),t._v(" "),i("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"30px"},attrs:{type:"primary",size:"small"},on:{click:function(e){t.handleDeleteEdit()}}},[t._v("\n            审核\n        ")])],1),t._v(" "),i("div",[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"highlight-current-row":!0,"element-loading-text":"加载中......."},on:{"row-click":t.handleCurrentChange}},t._l(t.tableHeader,function(t){return i("el-table-column",{key:t.prop,attrs:{label:t.label,prop:t.prop,width:t.width,"min-width":t.minWidth,align:t.align,formatter:t.formatter,"show-overflow-tooltip":""}})})),t._v(" "),i("div",{staticClass:"pagination"},[i("el-pagination",{attrs:{"current-page":t.listQuery.page,"page-sizes":[15,30,45,60],"page-size":t.listQuery.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.userPageSize,"current-change":t.userPage}})],1)],1),t._v(" "),i("el-dialog",{attrs:{title:"身份认证信息",visible:t.dialogFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{attrs:{model:t.temp}},[i("el-form-item",{attrs:{label:"证件认证状态","label-width":t.formLabelWidth}},[[0==t.temp.identityValidateState?i("div",[t._v("\n                        未提交\n                    ")]):1==t.temp.identityValidateState?i("div",[t._v("\n                        待审核\n                    ")]):3==t.temp.identityValidateState?i("div",[t._v("\n                        已认证\n                    ")]):4==t.temp.identityValidateState?i("div",[t._v("\n                        不通过\n                    ")]):t._e()]],2),t._v(" "),i("el-form-item",{attrs:{label:"姓名","label-width":t.formLabelWidth}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:t.temp.name,callback:function(e){t.temp.name=e},expression:"temp.name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"国家/地区","label-width":t.formLabelWidth}},[i("el-select",{staticClass:"filter-item",on:{change:t.handleChange},model:{value:t.temp.identityArea,callback:function(e){t.temp.identityArea=e},expression:"temp.identityArea"}},t._l(t.citybos,function(t){return i("el-option",{key:t.countryCode,attrs:{label:t.cityName,value:t.cityId}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:"证件类型","label-width":t.formLabelWidth}},[i("el-select",{staticClass:"filter-item",model:{value:t.temp.identityType,callback:function(e){t.temp.identityType=e},expression:"temp.identityType"}},t._l(t.identityType,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:"证件号码","label-width":t.formLabelWidth}},[i("el-input",{model:{value:t.temp.idCard,callback:function(e){t.temp.idCard=e},expression:"temp.idCard"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"身份证正面","label-width":t.formLabelWidth}},[i("el-popover",{ref:"popover1",attrs:{placement:"right-start",title:"",width:"500",trigger:"click",content:""}},[i("img",{staticClass:"img-big",attrs:{src:t.temp.reversePathImg,alt:""}})]),t._v(" "),i("img",{directives:[{name:"popover",rawName:"v-popover:popover1",arg:"popover1"}],staticClass:"images",attrs:{src:t.temp.reversePathImg}})],1),t._v(" "),i("el-form-item",{attrs:{label:"身份证反面","label-width":t.formLabelWidth}},[i("el-popover",{ref:"popover2",attrs:{placement:"right-start",title:"",width:"500",trigger:"click",content:""}},[i("img",{staticClass:"img-big",attrs:{src:t.temp.reversePathImg,alt:""}})]),t._v(" "),i("img",{directives:[{name:"popover",rawName:"v-popover:popover2",arg:"popover2"}],staticClass:"images",attrs:{src:t.temp.reversePathImg}})],1),t._v(" "),i("el-form-item",{attrs:{label:"手持身份证","label-width":t.formLabelWidth}},[i("el-popover",{ref:"popover3",attrs:{placement:"right-start",title:"",width:"500",trigger:"click",content:""}},[i("img",{staticClass:"img-big",attrs:{src:t.temp.handPath,alt:""}})]),t._v(" "),i("img",{directives:[{name:"popover",rawName:"v-popover:popover3",arg:"popover3"}],staticClass:"images",attrs:{src:t.temp.handPath}})],1),t._v(" "),i("el-form-item",{attrs:{label:"审核结果","label-width":t.formLabelWidth}},[i("el-radio",{attrs:{label:3},model:{value:t.temp.photoidValidate,callback:function(e){t.temp.photoidValidate=e},expression:"temp.photoidValidate"}},[t._v("通过审核")]),t._v(" "),i("el-radio",{attrs:{label:4},model:{value:t.temp.photoidValidate,callback:function(e){t.temp.photoidValidate=e},expression:"temp.photoidValidate"}},[t._v("驳回")])],1),t._v(" "),4===t.temp.photoidValidate?i("div",[i("el-form-item",{attrs:{label:"驳回原因","label-width":t.formLabelWidth}},[i("el-input",{attrs:{"auto-complete":"off",value:"form.checkRemark",type:"textarea"},model:{value:t.temp.checkRemark,callback:function(e){t.temp.checkRemark=e},expression:"temp.checkRemark"}})],1)],1):t._e()],1),t._v(" "),i("div",{staticClass:"dialog-footer",slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.updateUser}},[t._v("确 定")])],1)],1)],1)},l=[],r={render:a,staticRenderFns:l};e.a=r},203:function(t,e,i){"use strict";function a(t){i(938)}Object.defineProperty(e,"__esModule",{value:!0});var l=i(829),r=i.n(l),n=i(1012),o=i(23),s=a,d=o(r.a,n.a,s,null,null);e.default=d.exports},707:function(t,e,i){"use strict";function a(t){return(0,u.default)({url:"admin/conditionuser",method:"get",params:t})}function l(t){return(0,u.default)({url:"admin/updateuser",method:"put",data:t})}function r(t){return(0,u.default)({url:"admin/enabledisable",method:"put",data:t})}function n(t){return(0,u.default)({url:"admin/checkuser",method:"put",data:t})}function o(t){return(0,u.default)({url:"admin/selectuser",method:"get",params:t})}function s(){return(0,u.default)({url:"admin/getCity",method:"get"})}function d(t){return(0,u.default)({url:"admin/resetOrUpdate",method:"put",data:t})}function m(t){return(0,u.default)({url:"admin/unlockLoginPwd/"+t,method:"put"})}Object.defineProperty(e,"__esModule",{value:!0}),e.fetchList=a,e.alterUser=l,e.disableUser=r,e.verifiedUser=n,e.selectUser=o,e.getCity=s,e.resetUpdate=d,e.unlockLoginPwd=m;var p=i(24),u=function(t){return t&&t.__esModule?t:{default:t}}(p)},829:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(11),l=function(t){return t&&t.__esModule?t:{default:t}}(a),r=i(707),n=[{key:0,display_name:"全部状态"},{key:1,display_name:"手机注册"},{key:2,display_name:"邮箱注册"},{key:3,display_name:"QQ注册"},{key:4,display_name:"微信注册"}];e.default={data:function(){return{logintypeOptions:n,total:null,tableData:[],citybos:[],listLoading:!0,dialogFormVisible:!1,identityType:null,temp:{userId:"",identityValidateState:"",name:"",identityArea:"",identityType:"",idCard:"",checkRemark:"",identityValidate:""},selectUserId:{userId:""},formLabelWidth:"120px",currentRow:null,listQuery:{nameUidNum:"",accountStatus:0,identityValidate:3,photoidValidate:1,videoValidate:"",pageSize:15,page:1},msg:"",tableHeader:[{label:"UID",prop:"userId",width:65},{label:"手机号码",prop:"phoneNum",width:130},{label:"邮箱",prop:"email",width:160},{label:"姓名",prop:"name",minWidth:120},{label:"证件类型",prop:"identityType",minWidth:95,align:"center",formatter:function(t,e,i){return 0===i?"身份证":2===i?"护照":"未知"}},{label:"国籍",minWidth:120,formatter:function(t,e,i){return null===t.cndict?"未提交":t.cndict+"("+t.endict+")"}},{label:"证件号码",prop:"idCard",minWidth:95,align:"center"},{label:"实名认证",prop:"identityValidate",width:110,align:"center",formatter:function(t,e,i){return 3==t.videoValidate?"C3认证":3==t.photoidValidate?"C2认证":3==t.identityType?"C1认证":"未认证"}},{label:"状态",prop:"accountStatus",width:80,align:"center",formatter:function(t,e,i){return 1===i?"正常":2===i?"禁用":"未知"}},{label:"登录IP",prop:"0"},{label:"申请时间",prop:"photoidTime",width:170,formatter:function(t,e,i){return l.default.utils.parseDateTimeStr(i)}},{label:"注册时间",prop:"createTime",width:170,formatter:function(t,e,i){return l.default.utils.parseDateTimeStr(i)}},{label:"最后更新时间",prop:"updateTime",width:170,formatter:function(t,e,i){return l.default.utils.parseDateTimeStr(i)}}]}},computed:{tableDataLength:function(){return this.tableData.length}},methods:{getList:function(){var t=this;this.listLoading=!0,(0,r.fetchList)(this.listQuery).then(function(e){t.tableData=e.data.userList,t.total=e.data.total,t.listLoading=!1})},handleFilter:function(){this.getList()},userPage:function(t){this.listQuery.page=t,this.getList()},userPageSize:function(t){this.listQuery.pageSize=t,this.getList()},updateUser:function(){var t=this;3===this.temp.photoidValidate&&(this.temp.checkRemark=""),(0,r.alterUser)(this.temp).then(function(e){e.result?(t.dialogFormVisible=!1,t.msg="操作成功!",t.$message({type:"success",message:t.msg}),t.currentRow=null,t.getList()):(t.msg=e.msg,t.$message({type:"error",message:t.msg}))})},handleChange:function(t){this.temp.identityType=1===t?0:2,this.identityType=1===t?[{id:0,name:"身份证"}]:[{id:2,name:"护照"}]},validate:function(){return!!this.temp.name||(this.$message.warning("请输入姓名"),!1)},handleDeleteEdit:function(){var t=this;if(!this.currentRow)return void this.getMessage("请选择用户",!1);var e=this.currentRow.userId;this.dialogFormVisible=!0,this.listLoad=!0,this.selectUserId.userId=e,(0,r.selectUser)(this.selectUserId).then(function(e){t.temp=e.data,t.temp.identityValidateState=e.data.identityValidate,3!==e.data.identityValidate&&4!==e.data.identityValidate&&(t.temp.identityValidate=3),3!==e.data.photoidValidate&&4!==e.data.photoidValidate&&(t.temp.photoidValidate=3),t.listLoad=!1})},getCityList:function(){var t=this;(0,r.getCity)().then(function(e){t.citybos=e.data.citybos})},handleCurrentChange:function(t){console.log(t),this.currentRow=t}},created:function(){this.getList(),this.getCityList()}}},898:function(t,e,i){e=t.exports=i(152)(!0),e.push([t.i,".el-dialog--small{width:30%}.images{width:200px;height:150px}.img-big{width:100%}","",{version:3,sources:["C:/Users/XY-5-16-02/Desktop/dctp-admin-code/src/views/members/Imageauthentication.vue"],names:[],mappings:"AACA,kBACI,SAAW,CACd,AACD,QACI,YAAa,AACb,YAAc,CACjB,AACD,SACI,UAAW,CACd",file:"Imageauthentication.vue",sourcesContent:["\n.el-dialog--small {\n    width: 30%;\n}\n.images{\n    width: 200px;\n    height: 150px;\n}\n.img-big {\n    width: 100%\n}\n\n"],sourceRoot:""}])},938:function(t,e,i){var a=i(898);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i(153)("884d4608",a,!0)}});
//# sourceMappingURL=31.b3386481a302bf452164.js.map