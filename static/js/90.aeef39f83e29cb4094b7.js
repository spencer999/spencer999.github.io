webpackJsonp([90],{1021:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"p-20"},[a("div",{staticStyle:{"margin-bottom":"20px"}},[a("el-select",{on:{change:e.handleStatusChange},model:{value:e.valueStatus,callback:function(t){e.valueStatus=t},expression:"valueStatus"}},e._l(e.optionsStatus,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("el-input",{staticStyle:{"margin-left":"10px",width:"300px"},attrs:{placeholder:"请输入手机、姓名、订单号"},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}}),e._v(" "),a("span",{staticClass:"demonstration"},[e._v("创建日期")]),e._v(" "),a("el-date-picker",{attrs:{align:"right",clearable:!0,type:"date",placeholder:"选择日期"},on:{change:e.handleChangeDate},model:{value:e.valueDate,callback:function(t){e.valueDate=t},expression:"valueDate"}}),e._v(" "),a("span",{staticStyle:{"margin-left":"10px"}},[e._v("收款账户")]),e._v(" "),a("el-select",{attrs:{clearable:"",placeholder:"全部账户"},model:{value:e.inputData.receiptBankAccount,callback:function(t){e.inputData.receiptBankAccount=t},expression:"inputData.receiptBankAccount"}},e._l(e.optionsType,function(t){return a("el-option",{key:t.id,attrs:{label:e.accountCode(t.bankName,t.bankAccount),value:t.bankAccount}})})),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(t){t.stopPropagation(),e.query(e.pageNum=1,e.inputData.transStatus)}}},[e._v("查询\n        ")]),e._v(" "),e.permission.cancelAll?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){t.stopPropagation(),e.showDialog("cancelAll")}}},[e._v("\n            全部取消\n        ")]):e._e()],1),e._v(" "),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"element-loading-text":"给我一点时间",border:"","tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange,"current-change":e.handleTableCurrentChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),e._l(e.tableHeader,function(e){return a("el-table-column",{key:e.prop,attrs:{label:e.label,prop:e.prop,width:e.width,"min-width":e.minWidth,align:e.align,formatter:e.formatter,"show-overflow-tooltip":""}})}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"135"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.permission.verify?a("el-button",{attrs:{type:"text"},on:{click:function(a){a.stopPropagation(),e.showDialog("examine",t.row.id)}}},[e._v("审核\n                    ")]):e._e(),e._v(" "),e.permission.cancel?a("el-button",{attrs:{type:"text"},on:{click:function(a){a.stopPropagation(),e.showDialog("cancel",t.row.id)}}},[e._v("\n                        取消充值\n                    ")]):e._e()]}}])})],2)],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":e.pageNum,"page-sizes":[10,20,30,50],"page-size":e.inputData.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pageTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])},l=[],i={render:n,staticRenderFns:l};t.a=i},184:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(811),l=a.n(n),i=a(1021),o=a(23),u=o(l.a,i.a,null,null,null);t.default=u.exports},811:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(!function(){var e=new Error('Cannot find module "babel-runtime/core-js/promise"');throw e.code="MODULE_NOT_FOUND",e}()),i=n(l),o=a(24),u=n(o),r=a(11),c=n(r),s=[{value:0,label:"全部状态"},{value:1,label:"未付款"},{value:2,label:"待审核"}];t.default={data:function(){return{tableData:[],tableHeader:[{prop:"id",label:"订单号",width:80},{prop:"userId",label:"用户名",width:80},{prop:"username",label:"真实姓名",width:100},{prop:"userPhone",label:"手机号码",width:150},{prop:"type",label:"类型",width:80,formatter:function(e,t,a){return 1===a?"充值":2===a?"提现":""}},{prop:"amount",label:"金额",width:120},{prop:"transStatus",label:"状态",width:120,formatter:function(e,t,a){var n=c.default.utils.findDataByValue(s,a,"value");return n?n.label:""}},{prop:"payee",label:"付款人",width:80},{prop:"payBankName",label:"支付账户",width:120},{prop:"payBankAccount",label:"支付帐号",width:240},{prop:"receiptBankName",label:"收款账户",width:120},{prop:"receiptBankAccount",label:"收款帐号",width:240},{prop:"createTime",label:"创建时间",width:180,formatter:function(e,t,a){return c.default.utils.parseDateTimeStr(a)}},{prop:"auditUserId",label:"审核人",width:80}],multipleSelection:[],currentRow:null,optionsStatus:s,valueStatus:0,optionsType:[],valueType:"",input:"",inputData:{username:"",transStatus:0,createTime:"",receiptBankName:"",receiptBankAccount:"",page:{pageNum:"",pageSize:10}},valueDate:"",pageNum:1,pageTotal:null,listLoading:!0}},methods:{handleSelectionChange:function(e){this.multipleSelection=e},handleSizeChange:function(e){this.inputData.page.pageSize=e,this.query(this.pageNum)},handleTableCurrentChange:function(e){this.currentRow=e},handleCurrentChange:function(e){this.query(e)},handleStatusChange:function(e){this.inputData.transStatus=e},handleChangeDate:function(e){this.inputData.createTime=e},showDialog:function(e,t){var a=this,n=this;switch(e){case"examine":this.$confirm("确认审核？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.examine(t)}).catch(function(){a.$message.info("操作已取消")});break;case"cancel":this.$confirm("确认取消充值？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.cancel(t)}).catch(function(){a.$message.info("操作已取消")});break;case"cancelAll":console.log(n.multipleSelection.length),0!==n.multipleSelection.length?this.$confirm("取消"+n.multipleSelection.length+"条充值订单？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.cancel()}).catch(function(){a.$message.info("操作已取消")}):this.$confirm("取消全部充值订单？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.cancelAll()}).catch(function(){a.$message.info("操作已取消")})}},getTableData:function(){var e=this;return this.listLoading=!0,new i.default(function(t,a){(0,u.default)({url:"admin/rmbrecharges?pageNum="+e.pageNum+"&pageSize="+e.inputData.page.pageSize,method:"get"}).then(function(t){console.log(t),t.result&&(e.tableData=t.data.data,e.pageTotal=t.data.page.count),e.listLoading=!1})})},query:function(e){var t=this;return this.listLoading=!0,t.inputData.username=t.input,t.inputData.page.pageNum=e,console.log(t.inputData.receiptBankAccount),new i.default(function(e,a){(0,u.default)({url:"admin/rmbrecharges/query",method:"post",data:t.inputData}).then(function(e){e.result&&(t.tableData=e.data.data,t.pageTotal=e.data.page.count,t.listLoading=!1)})})},examine:function(e){var t=this;return new i.default(function(a,n){(0,u.default)({url:"admin/rmbrecharge/check",method:"put",data:{ids:[e]}}).then(function(e){e.result,t.getMessage(e.msg,e.result),t.query()})})},getMessage:function(e,t){t?this.$message({showClose:!0,message:e,type:"success"}):this.$message({showClose:!0,message:e,type:"error"})},cancel:function(e){var t=this,a={};if(void 0===e){for(var n=[],l=0;l<this.multipleSelection.length;l++)n.push(this.multipleSelection[l].id);a={ids:n}}else a={ids:[e]};return new i.default(function(e,n){(0,u.default)({url:"admin/rmbrecharge/cancel",method:"put",data:a}).then(function(e){e.result,t.getMessage(e.msg,e.result),t.query()})})},cancelAll:function(){var e=this;return new i.default(function(t,a){(0,u.default)({url:"admin/rmbrecharge/cancelall",method:"put"}).then(function(t){t.result,e.getMessage(t.msg,t.result),e.query()})})},getAccount:function(){var e=this;return new i.default(function(t,a){(0,u.default)({url:"admin/receiptaccounts?pageNum=1&pageSize=500",method:"get"}).then(function(t){console.log(t),t.result&&(e.optionsType=t.data.data)})})},accountCode:function(e,t){if(null!==e&&null!==t)return e+"  **"+t.substring(t.length-4,t.length)}},created:function(){this.getTableData(),this.getAccount()}}}});
//# sourceMappingURL=90.aeef39f83e29cb4094b7.js.map