webpackJsonp([59],{1007:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"p-20"},[a("div",{staticClass:"filter-container",staticStyle:{"margin-bottom":"20px"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"300px"},attrs:{placeholder:"请输入用户ID、登录名"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13))return null;t.conditionQuery(e)}},model:{value:t.currencyTrans.keyword,callback:function(e){t.currencyTrans.keyword=e},expression:"currencyTrans.keyword"}}),t._v(" "),a("span",[t._v("虚拟币类型")]),t._v(" "),a("el-select",{staticClass:"filter-item",staticStyle:{width:"150px"},attrs:{clearable:"",placeholder:"全部类型"},model:{value:t.currencyTrans.introduceId,callback:function(e){t.currencyTrans.introduceId=e},expression:"currencyTrans.introduceId"}},t._l(t.coinList,function(t){return a("el-option",{key:t.baseSeq,attrs:{label:t.chineseName,value:t.baseSeq}})})),t._v(" "),a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"30px"},attrs:{size:"small"},on:{click:t.conditionQuery}},[t._v("查询\n        ")]),t._v(" "),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"small"},on:{click:t.exportData}},[t._v("导出数据\n        ")])],1),t._v(" "),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"singleTable",attrs:{data:t.tableData,"element-loading-text":"给我一点时间"}},[t._l(t.tableHeader,function(t){return a("el-table-column",{key:t.prop,attrs:{label:t.label,prop:t.prop,width:t.width,"min-width":t.minWidth,align:t.align,formatter:t.formatter,"show-overflow-tooltip":""}})}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("ul",{staticStyle:{"list-style":"none",padding:"0px",height:"30px",margin:"0px"}},[6!==e.row.accountStatus?a("li",{staticStyle:{float:"right",width:"60px"}},[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.neglectCurrency(e.row.id,3)}}},[t._v("忽略(已转)\n                            ")])],1):t._e(),t._v(" "),a("li",{staticStyle:{float:"right",width:"60px"}},[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.passCurrency(e.row,3)}}},[t._v("重新拔币\n                            ")])],1),t._v(" "),a("li",{staticStyle:{float:"right",width:"60px"}},[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.showRepairTXIdDialog(e.row.id)}}},[t._v("补录ID\n                            ")])],1)])]}}])})],2),t._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":t.currencyTrans.page,"page-sizes":[10,20,30,50],"page-size":t.currencyTrans.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.userPageSize,"current-change":t.userPage}})],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"请输入密码",visible:t.dialogFormVisible,"custom-class":"shenhe"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.lockWithdrawalVo}},[a("el-form-item",[a("el-input",{attrs:{type:"password"},model:{value:t.lockWithdrawalVo.walletPassword,callback:function(e){t.lockWithdrawalVo.walletPassword=e},expression:"lockWithdrawalVo.walletPassword"}})],1)],1),t._v(" "),a("div",{staticClass:"text-center",slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.Currency}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"请输入交易ID",visible:t.dialogTXIVisible},on:{"update:visible":function(e){t.dialogTXIVisible=e}}},[a("el-form",{attrs:{model:t.lockWithdrawalVo}},[a("el-form-item",[a("el-input",{model:{value:t.lockWithdrawalVo.txId,callback:function(e){t.lockWithdrawalVo.txId=e},expression:"lockWithdrawalVo.txId"}})],1)],1),t._v(" "),a("div",{staticClass:"text-center",slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogTXIVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.repairTXId}},[t._v("确 定")])],1)],1)],1)},r=[],n={render:i,staticRenderFns:r};e.a=n},168:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(795),r=a.n(i),n=a(1007),l=a(23),s=l(r.a,n.a,null,null,null);e.default=s.exports},706:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={hexToByte:function(t){for(var e=[],a=void 0,i=0;i<t.length;i+=2)a=t.substr(i,2),a=parseInt(a,16),e.push(a);return e},byteToHex:function(t){for(var e=[],a=void 0,i=0;i<t.length;i++)a=t[i].toString(16).toUpperCase(),a.length<2&&(a="0"+a),e.push(a);return e.join("")},strToByte:function(t){for(var e=[],a=void 0,i=0;i<t.length;i++)a=t.charCodeAt(i),e.push(a);return e},byteToStr:function(t){for(var e=[],a=void 0,i=0;i<t.length;i++)a=String.fromCharCode(t[i]),e.push(a);return e.join("")},xor:function(t,e){for(var a=[],i=void 0,r=void 0,n=0;n<t.length;n++)i=t[n],r=e[n]||0,a.push(i^r);return a},encrypt:function(t){var e=void 0,a=void 0;return e=this.strToByte(t),a=this.strToByte("DCTP"),this.byteToHex(this.xor(e,a))},decrypt:function(t){var e=this.hexToByte(t),a=this.strToByte("DCTP"),i=this.xor(e,a);return this.byteToStr(i)}};e.default=i},713:function(t,e,a){"use strict";function i(t){return(0,d.default)({url:"admin/currencytrans",method:"get",params:t})}function r(t){return(0,d.default)({url:"admin/currencytrans/pass",method:"put",data:t})}function n(t){return(0,d.default)({url:"admin/currencytrans/lock",method:"put",data:t})}function l(t){return(0,d.default)({url:"admin/currencytrans/issue",method:"put",data:t})}function s(t){return(0,d.default)({url:"admin/currencytrans/cancel",method:"put",data:t})}function o(t){return(0,d.default)({url:"admin/currencytrans/neglect",method:"put",data:t})}function c(t){return(0,d.default)({url:"admin/currencytrans/repair/txid",method:"put",data:t})}Object.defineProperty(e,"__esModule",{value:!0}),e.getCurrency=i,e.passCurrency=r,e.lockCurrency=n,e.issueCurrency=l,e.cancelCurrency=s,e.neglectcurrency=o,e.repairTXId=c;var u=a(24),d=function(t){return t&&t.__esModule?t:{default:t}}(u)},795:function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(11),n=i(r),l=a(706),s=i(l),o=a(713),c=[{key:1,display_name:"充值"},{key:2,display_name:"提现"},{key:3,display_name:"提现"}],u={baseSeq:0,chineseName:"全部类型",englishName:""},d=[{key:0,display_name:"全部状态"},{key:2,display_name:"等待审核"},{key:3,display_name:"成功提现"},{key:4,display_name:"系统撤销"},{key:5,display_name:"用户撤销"},{key:6,display_name:"正在处理"},{key:7,display_name:"正在拨币"},{key:8,display_name:"拨币异常"}];e.default={data:function(){return{allCoin:u,typeScope:c,dialogFormVisible:!1,dialogTXIVisible:!1,coinList:[],dateTime:"",tableData:[],total:null,lockWithdrawalVo:{id:"",itype:"",status:"",walletPassword:"",txId:""},currencyTrans:{keyword:"",type:2,status:8,introduceId:0,page:1,pageSize:15},msg:"",listLoading:!0,tableHeader:[{label:"单号id",prop:"id",align:"center",width:45},{label:"会员UID",prop:"userId",align:"center",width:55},{label:"登录名",prop:"signtype",width:85,align:"center",formatter:function(t,e,a){return 1===a?t.phone:2===a?t.email:"未知"}},{label:"会员昵称",prop:"nickName",width:65},{label:"真实姓名",prop:"realName",width:65},{label:"资产类型",prop:"currencyName",width:65,align:"center"},{label:"交易类型",prop:"type",width:65,align:"center",formatter:function(t,e,a){var i=n.default.utils.findDataByValue(c,a,"key");return i?i.display_name:""}},{label:"状态",prop:"status",width:65,align:"center",formatter:function(t,e,a){var i=n.default.utils.findDataByValue(d,a,"key");return i?i.display_name:""}},{label:"提现数量",width:65,align:"center",formatter:function(t,e,a){var i,r,n,l;try{i=t.amount.toString().split(".")[1].length}catch(t){i=0}try{r=t.fee.toString().split(".")[1].length}catch(t){r=0}return n=Math.pow(10,Math.max(i,r)),l=i>=r?i:r,((t.amount*n-t.fee*n)/n).toFixed(l)}},{label:"手续费",prop:"fee",align:"center",width:65},{label:"提现地址",prop:"transAddress",width:265,align:"center"},{label:"交易id",prop:"txId",width:450,align:"center"},{label:"创建时间",prop:"createTime",width:170,formatter:function(t,e,a){return n.default.utils.parseDateTimeStr(a)}},{label:"最后修改时间",prop:"updateTime",width:170,formatter:function(t,e,a){return n.default.utils.parseDateTimeStr(a)}}]}},computed:{tableDataLength:function(){return this.tableData.length}},methods:{userPage:function(t){this.currencyTrans.page=t,this.getList()},userPageSize:function(t){this.currencyTrans.pageSize=t,this.getList()},conditionQuery:function(){this.getList()},neglectCurrency:function(t,e){var a=this;this.lockWithdrawalVo.id=t,this.lockWithdrawalVo.status=e,this.lockWithdrawalVo.itype=2,(0,o.neglectcurrency)(this.lockWithdrawalVo).then(function(t){t.result&&(a.msg="已经忽略拨币",a.$message({type:"success",message:a.msg})),a.getList()})},getList:function(){var t=this;this.listLoading=!0,(0,o.getCurrency)(this.currencyTrans).then(function(e){t.tableData=e.data.list,t.total=e.data.totalItems,t.coinList=e.data.coinList,t.coinList.unshift(t.allCoin),e.result||(t.msg=e.msg,t.$message({type:"warning",message:t.msg})),t.listLoading=!1})},passCurrency:function(t,e){this.lockWithdrawalVo.id=t.id,this.lockWithdrawalVo.status=e,this.lockWithdrawalVo.walletPassword="",this.dialogFormVisible=!0},Currency:function(){var t=this,e={id:this.lockWithdrawalVo.id,status:this.lockWithdrawalVo.status,walletPassword:""!==this.lockWithdrawalVo.walletPassword?s.default.encrypt(this.lockWithdrawalVo.walletPassword):""};(0,o.passCurrency)(e).then(function(e){e.result?(t.msg=e.msg,t.$message({type:"success",message:t.msg}),t.dialogFormVisible=!1):(t.msg=e.msg,t.lockWithdrawalVo.walletPassword="",t.$message({type:"error",message:t.msg})),t.getList()})},exportData:function(){var t="api/admin/currencytrans/nofilter/export?type=2&keyword="+this.currencyTrans.keyword+"&introduceId="+this.currencyTrans.introduceId+"&status="+this.currencyTrans.status,e="";void 0===this.dateTime[0]||null===this.dateTime[0]?(this.currencyTrans.endTime="",this.currencyTrans.startTime="",e=t):e=t+"&startTime="+this.currencyTrans.startTime+"&endTime="+this.currencyTrans.endTime,location.href=e},showRepairTXIdDialog:function(t){this.dialogTXIVisible=!0,this.lockWithdrawalVo.txId="",this.lockWithdrawalVo.id=t},repairTXId:function(){var t=this;(0,o.repairTXId)(this.lockWithdrawalVo).then(function(e){e.result&&(t.getList(),t.dialogTXIVisible=!1),t.getMessage(e.msg,e.result)})}},created:function(){this.getList()}}}});
//# sourceMappingURL=59.d1c8a6cb00b9e5420ed6.js.map