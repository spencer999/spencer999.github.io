webpackJsonp([38],{233:function(t,a,e){"use strict";function i(t){e(926)}Object.defineProperty(a,"__esModule",{value:!0});var s=e(859),l=e.n(s),r=e(984),n=e(23),o=i,u=n(l.a,r.a,o,"data-v-1fc4c9ac",null);a.default=u.exports},859:function(t,a,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(a,"__esModule",{value:!0});var s=e(!function(){var t=new Error('Cannot find module "babel-runtime/core-js/promise"');throw t.code="MODULE_NOT_FOUND",t}()),l=i(s),r=e(24),n=i(r);a.default={data:function(){var t=function(t,a,e){""===a&&e(new Error("不能为空")),e()};return{itemWidth:"160px",dialogVisible:!1,paramsData:{id:"",systemKey:"",systemValue:"",description:""},queryData:{systemKey:"",pageNum:1,pageSize:10},rules:{systemKey:[{validator:t,trigger:"blur"}],systemValue:[{validator:t,trigger:"blur"}],description:[{validator:t,trigger:"blur"}]},tableData:[],tableHeader:[{label:"KEY",prop:"systemKey",width:360},{label:"参数值",prop:"systemValue",width:360},{label:"备注",prop:"description"}],total:0,uploadData:{type:1,usageType:3},fileList:[],action:"",disabled:!0}},created:function(){this.initData()},methods:{handleRemove:function(t,a){this.paramsData.systemValue=""},handleSuccess:function(t,a,e){this.fileList=[e[e.length-1]],this.paramsData.systemValue=t.data},handleBeforeUpload:function(t){var a=t.name.toLowerCase();return a.endsWith(".jpg")||a.endsWith(".jpeg")||a.endsWith(".png")?!(t.size>2097152)||(this.$message.error("图片太大，请重新选择"),!1):(this.$message.error("格式不对，请重新选择"),!1)},dialogClose:function(){this.resetData()},initData:function(){""===this.queryData.systemKey?this.getList():this.query()},query:function(){var t=this;return new l.default(function(a,e){(0,n.default)({url:"/admin/systemparams/query",method:"get",params:t.queryData}).then(function(a){a.result&&(t.tableData=a.data)}).catch()})},getList:function(){var t=this;return new l.default(function(a,e){(0,n.default)({url:"/admin/systemparamslist",method:"get",params:t.queryData}).then(function(a){a.result&&(t.tableData=a.data.list,t.total=a.data.page.count)}).catch()})},getParam:function(t){var a=this;return new l.default(function(e,i){(0,n.default)({url:"/admin/systemparams/"+t,method:"get"}).then(function(t){t.result&&(a.setData(t.data),a.dialogVisible=!0)}).catch()})},setData:function(t){var a=void 0;for(a in this.paramsData)this.paramsData[a]=null===t[a]?"":t[a]},resetData:function(){var t=void 0;this.$refs.paramsData.resetFields();for(t in this.paramsData)this.paramsData[t]="";this.action="",this.fileList=[],this.disabled=!0},modify:function(){var t=this;return new l.default(function(a,e){(0,n.default)({url:"admin/systemparams",method:"put",data:t.paramsData}).then(function(a){a.result&&(t.dialogVisible=!1,t.initData()),t.getMessage(a.msg,a.result)}).catch()})},showAddParamDialog:function(){this.dialogVisible=!0,this.action="add",this.disabled=!1},addParam:function(){var t=this;return new l.default(function(a,e){(0,n.default)({url:"admin/systemparams",method:"post",data:t.paramsData}).then(function(a){a.result&&(t.dialogVisible=!1,t.initData()),t.getMessage(a.msg,a.result)}).catch()})},validate:function(){var t=this;this.$refs.paramsData.validate(function(a){if(a)switch(t.action){case"add":t.addParam();break;default:t.modify()}})},clearParams:function(){var t=this;return new l.default(function(a,e){(0,n.default)({url:"admin/systemparams/clear",method:"get"}).then(function(a){a.result,t.getMessage(a.msg,a.result)}).catch()})},clearParamsWarning:function(){var t=this;this.$confirm("确认清除缓存？","提示",{type:"warning"}).then(function(){t.clearParams()}).catch(function(){})},userPage:function(t){this.queryData.pageNum=t,this.initData()},userPageSize:function(t){this.queryData.pageSize=t,this.initData()}}}},886:function(t,a,e){a=t.exports=e(152)(!0),a.push([t.i,".input-short[data-v-1fc4c9ac]{width:300px}","",{version:3,sources:["C:/Users/XY-5-16-02/Desktop/dctp-admin-code/src/views/system/params.vue"],names:[],mappings:"AACA,8BACE,WAAa,CACd",file:"params.vue",sourcesContent:["\n.input-short[data-v-1fc4c9ac] {\n  width: 300px;\n}\n"],sourceRoot:""}])},926:function(t,a,e){var i=e(886);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);e(153)("2764765f",i,!0)},984:function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"p-20"},[e("div",{staticClass:"filter-container",staticStyle:{"margin-bottom":"20px"}},[e("el-input",{staticClass:"filter-item",staticStyle:{width:"300px"},attrs:{placeholder:"请输入KEY"},nativeOn:{keyup:function(a){if(!("button"in a)&&t._k(a.keyCode,"enter",13))return null;t.initData(a)}},model:{value:t.queryData.systemKey,callback:function(a){t.queryData.systemKey=a},expression:"queryData.systemKey"}}),t._v(" "),e("el-button",{staticClass:"filter-item",attrs:{size:"small"},on:{click:t.initData}},[t._v("查询")]),t._v(" "),t.permission.add?e("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.showAddParamDialog}},[t._v("新增")]):t._e(),t._v(" "),e("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.clearParamsWarning}},[t._v("清空缓存")])],1),t._v(" "),e("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData}},[e("el-table-column",{attrs:{type:"index",label:"序号",width:"110"}}),t._v(" "),t._l(t.tableHeader,function(t){return e("el-table-column",{key:t.prop,attrs:{label:t.label,prop:t.prop,width:t.width,"min-width":t.minWidth,align:t.align,formatter:t.formatter,"show-overflow-tooltip":""}})}),t._v(" "),e("el-table-column",{attrs:{fixed:"right",label:"操作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("ul",{staticStyle:{"list-style":"none",padding:"0px"}},[e("li",{staticStyle:{float:"left",width:"30px"}},[t.permission.edit?e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){t.getParam(a.row.id)}}},[t._v("修改\n                        ")]):t._e()],1)])]}}])})],2),t._v(" "),e("div",{staticClass:"pagination"},[e("el-pagination",{attrs:{"current-page":t.queryData.pageNum,"page-sizes":[10,20,30,50],"page-size":t.queryData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.userPageSize,"current-change":t.userPage}})],1),t._v(" "),e("el-dialog",{attrs:{title:"修改系统参数",visible:t.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(a){t.dialogVisible=a},close:t.dialogClose}},[e("el-form",{ref:"paramsData",attrs:{model:t.paramsData,rules:t.rules}},[e("el-form-item",{attrs:{"label-width":t.itemWidth,label:"*KEY",prop:"systemKey"}},[e("el-input",{staticClass:"input-short",attrs:{disabled:t.disabled,"auto-complete":"off"},model:{value:t.paramsData.systemKey,callback:function(a){t.paramsData.systemKey=a},expression:"paramsData.systemKey"}})],1),t._v(" "),e("el-form-item",{attrs:{"label-width":t.itemWidth,label:"选择图片"}},[e("el-upload",{staticClass:"upload-demo",attrs:{action:"/upload/nofilter/file","list-type":"picture","on-success":t.handleSuccess,"on-remove":t.handleRemove,name:"uploadFile","before-upload":t.handleBeforeUpload,autoUpload:!0,data:t.uploadData,"file-list":t.fileList}},[e("el-button",{attrs:{size:"small",type:"primary"}},[t._v("上传图片")])],1)],1),t._v(" "),e("el-form-item",{attrs:{"label-width":t.itemWidth,label:"*参数值",prop:"systemValue"}},[e("el-input",{staticClass:"input-short",attrs:{type:"textarea","auto-complete":"off"},model:{value:t.paramsData.systemValue,callback:function(a){t.paramsData.systemValue=a},expression:"paramsData.systemValue"}})],1),t._v(" "),e("el-form-item",{attrs:{"label-width":t.itemWidth,label:"*备注",prop:"description"}},[e("el-input",{staticClass:"input-short",attrs:{type:"textarea","auto-complete":"off"},model:{value:t.paramsData.description,callback:function(a){t.paramsData.description=a},expression:"paramsData.description"}})],1)],1),t._v(" "),e("div",{staticClass:"dialog-footer",slot:"footer"},[e("el-button",{on:{click:function(a){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:t.validate}},[t._v("保 存")])],1)],1)],1)},s=[],l={render:i,staticRenderFns:s};a.a=l}});
//# sourceMappingURL=38.66bdd7ddb9032593eea6.js.map