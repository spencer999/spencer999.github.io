{"version":3,"sources":["webpack:///static/js/81.ad8298d4027eda849c1a.js","webpack:///./src/views/system/role.vue?f06c","webpack:///./src/views/system/role.vue","webpack:///src/views/system/role.vue"],"names":["webpackJsonp","1029","module","__webpack_exports__","__webpack_require__","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","span","ref","data","tableData","default-expand-all","node-key","highlight-current","expand-on-click-node","current-node-key","currentId","props","defaultProps","on","node-click","view","_v","_l","item","class","is-active","activeIndex","index","click","$event","stopPropagation","changeTab","_s","label","staticStyle","margin-right","margin-top","size","confirmDelete","gutter","model","value","callback","$$v","name","trim","expression","type","resize","autosize","description","rolePermissionVoList","key","id","style","padding-left","left","children","access","saveRole","staticRenderFns","esExports","235","Object","defineProperty","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_13_0_4_vue_loader_lib_selector_type_script_index_0_role_vue__","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_13_0_4_vue_loader_lib_selector_type_script_index_0_role_vue___default","n","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_13_0_4_vue_loader_lib_template_compiler_index_id_data_v_74b785cc_hasScoped_false_node_modules_vue_loader_13_0_4_vue_loader_lib_selector_type_template_index_0_role_vue__","normalizeComponent","Component","a","861","exports","_interopRequireDefault","obj","__esModule","default","_promise","e","Error","code","_promise2","_fetch","_fetch2","_dctp","_dctp2","tabs","checkboxOptions","computed","permissionOptions","permission","$store","state","permission_menu","length","len","i","fillPermission","methods","getRoles","_this","resolve","reject","url","method","params","pageNum","pageSize","then","response","result","validate","getRolePermissionVoList","assistModel","utils","assign","resetModel","getMessage","msg","deleteRole","_this2","$message","warning","$confirm","confirmButtonText","cancelButtonText","catch","setModel","setRolePermissionVoList","setTabs","show","edit","add","level","push","permissionVoList","forEach","ids","permissionId","error","created"],"mappings":"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","file":"static/js/81.ad8298d4027eda849c1a.js","sourcesContent":["webpackJsonp([81],{\n\n/***/ 1029:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"system-menu\"\n  }, [_c('el-row', {\n    staticClass: \"height100\"\n  }, [_c('el-col', {\n    staticClass: \"left-side relative height100\",\n    attrs: {\n      \"span\": 5\n    }\n  }, [_c('div', {\n    staticClass: \"system-menu-list\"\n  }, [_c('el-tree', {\n    ref: \"tree\",\n    attrs: {\n      \"data\": _vm.tableData,\n      \"default-expand-all\": \"\",\n      \"node-key\": \"id\",\n      \"highlight-current\": \"\",\n      \"expand-on-click-node\": false,\n      \"current-node-key\": _vm.currentId,\n      \"props\": _vm.defaultProps\n    },\n    on: {\n      \"node-click\": _vm.view\n    }\n  })], 1)]), _vm._v(\" \"), _c('el-col', {\n    staticClass: \"system-menu-content pb-10\",\n    attrs: {\n      \"span\": 19\n    }\n  }, [_c('div', {\n    staticClass: \"el-tabs__header\"\n  }, [_c('div', {\n    staticClass: \"el-tabs__nav-wrap\"\n  }, [_c('div', {\n    staticClass: \"el-tabs__nav-scroll\"\n  }, [_c('div', {\n    staticClass: \"el-tabs__nav\"\n  }, _vm._l((_vm.tabs), function(item) {\n    return _c('div', {\n      staticClass: \"el-tabs__item\",\n      class: {\n        'is-active': _vm.activeIndex === item.index\n      },\n      on: {\n        \"click\": function($event) {\n          $event.stopPropagation();\n          _vm.changeTab(item.index)\n        }\n      }\n    }, [_vm._v(_vm._s(item.label))])\n  })), _vm._v(\" \"), _c('div', {\n    staticClass: \"fr\",\n    staticStyle: {\n      \"margin-right\": \"20px\",\n      \"margin-top\": \"7px\"\n    }\n  }, [_c('el-button', {\n    attrs: {\n      \"size\": \"small\"\n    },\n    on: {\n      \"click\": function($event) {\n        $event.stopPropagation();\n        _vm.confirmDelete($event)\n      }\n    }\n  }, [_vm._v(\"删除\")])], 1)])])]), _vm._v(\" \"), _c('div', [_c('el-row', {\n    attrs: {\n      \"gutter\": 16\n    }\n  }, [_c('el-col', {\n    staticClass: \"form-label text-right\",\n    attrs: {\n      \"span\": 3\n    }\n  }, [_vm._v(\"角色名称\")]), _vm._v(\" \"), _c('el-col', {\n    attrs: {\n      \"span\": 10\n    }\n  }, [_c('el-input', {\n    model: {\n      value: (_vm.model.name),\n      callback: function($$v) {\n        _vm.model.name = (typeof $$v === 'string' ? $$v.trim() : $$v)\n      },\n      expression: \"model.name\"\n    }\n  })], 1)], 1), _vm._v(\" \"), _c('el-row', {\n    attrs: {\n      \"gutter\": 16\n    }\n  }, [_c('el-col', {\n    staticClass: \"form-label text-right\",\n    attrs: {\n      \"span\": 3\n    }\n  }, [_vm._v(\"角色描述\")]), _vm._v(\" \"), _c('el-col', {\n    attrs: {\n      \"span\": 10\n    }\n  }, [_c('el-input', {\n    attrs: {\n      \"type\": \"textarea\",\n      \"resize\": \"none\",\n      \"autosize\": true\n    },\n    model: {\n      value: (_vm.model.description),\n      callback: function($$v) {\n        _vm.model.description = (typeof $$v === 'string' ? $$v.trim() : $$v)\n      },\n      expression: \"model.description\"\n    }\n  })], 1)], 1), _vm._v(\" \"), _c('el-row', {\n    attrs: {\n      \"gutter\": 16\n    }\n  }, [_c('el-col', {\n    staticClass: \"text-right\",\n    attrs: {\n      \"span\": 3\n    }\n  }, [_vm._v(\"角色权限\")]), _vm._v(\" \"), _c('el-col', {\n    attrs: {\n      \"span\": 21\n    }\n  }, [_c('el-checkbox-group', {\n    model: {\n      value: (_vm.rolePermissionVoList),\n      callback: function($$v) {\n        _vm.rolePermissionVoList = $$v\n      },\n      expression: \"rolePermissionVoList\"\n    }\n  }, _vm._l((_vm.permissionOptions), function(item) {\n    return _c('el-row', {\n      key: item.id,\n      attrs: {\n        \"gutter\": 16\n      }\n    }, [_c('el-col', {\n      attrs: {\n        \"span\": 7\n      }\n    }, [_c('div', {\n      style: ({\n        'padding-left': item.left + 'px'\n      })\n    }, [_c('span', {\n      staticClass: \"el-tree-node__expand-icon\",\n      class: item.children ? 'expanded' : 'is-leaf'\n    }), _vm._v(\" \"), _c('span', {\n      staticClass: \"el-tree-node__label\"\n    }, [_vm._v(_vm._s(item.label))])])]), _vm._v(\" \"), _c('el-col', {\n      attrs: {\n        \"span\": 17\n      }\n    }, _vm._l((item.permissionVoList), function(access) {\n      return _c('el-checkbox', {\n        key: access.id,\n        attrs: {\n          \"label\": access.id\n        }\n      }, [_vm._v(_vm._s(access.name))])\n    }))], 1)\n  }))], 1)], 1), _vm._v(\" \"), _c('el-row', [_c('el-col', {\n    attrs: {\n      \"span\": 3\n    }\n  }, [_vm._v(\" \")]), _vm._v(\" \"), _c('el-col', {\n    attrs: {\n      \"span\": 21\n    }\n  }, [_c('el-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": function($event) {\n        $event.stopPropagation();\n        _vm.saveRole($event)\n      }\n    }\n  }, [_vm._v(\"保存\")])], 1)], 1)], 1)])], 1)], 1)\n}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ 235:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_13_0_4_vue_loader_lib_selector_type_script_index_0_role_vue__ = __webpack_require__(861);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_13_0_4_vue_loader_lib_selector_type_script_index_0_role_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_13_0_4_vue_loader_lib_selector_type_script_index_0_role_vue__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_13_0_4_vue_loader_lib_template_compiler_index_id_data_v_74b785cc_hasScoped_false_node_modules_vue_loader_13_0_4_vue_loader_lib_selector_type_template_index_0_role_vue__ = __webpack_require__(1029);\nvar normalizeComponent = __webpack_require__(23)\n/* script */\n\n/* template */\n\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_13_0_4_vue_loader_lib_selector_type_script_index_0_role_vue___default.a,\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_13_0_4_vue_loader_lib_template_compiler_index_id_data_v_74b785cc_hasScoped_false_node_modules_vue_loader_13_0_4_vue_loader_lib_selector_type_template_index_0_role_vue__[\"a\" /* default */],\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ 861:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _promise = __webpack_require__(!(function webpackMissingModule() { var e = new Error(\"Cannot find module \\\"babel-runtime/core-js/promise\\\"\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()));\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _fetch = __webpack_require__(24);\n\nvar _fetch2 = _interopRequireDefault(_fetch);\n\nvar _dctp = __webpack_require__(11);\n\nvar _dctp2 = _interopRequireDefault(_dctp);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexports.default = {\n    data: function data() {\n        return {\n            tableData: [],\n            defaultProps: {\n                children: 'children',\n                label: 'name'\n            },\n            tabs: [],\n            currentId: '',\n            activeIndex: 1,\n            model: {\n                description: '',\n                id: '',\n                name: '',\n                rolePermissionVoList: ''\n            },\n            rolePermissionVoList: [],\n            checkboxOptions: {}\n        };\n    },\n\n    computed: {\n        permissionOptions: function permissionOptions() {\n            var permission = [];\n            var data = this.$store.state.permission.permission_menu;\n            data = data.length && data[0]['children'] ? data[0]['children'] : [];\n            var len = data.length;\n            var i = void 0;\n\n            for (i = 0; i < len; i++) {\n                this.fillPermission(permission, data[i], 0);\n            }\n            return permission;\n        }\n    },\n    methods: {\n        getRoles: function getRoles() {\n            var _this = this;\n            return new _promise2.default(function (resolve, reject) {\n                (0, _fetch2.default)({\n                    url: 'admin/roles',\n                    method: 'get',\n                    params: {\n                        pageNum: 1,\n                        pageSize: 1000\n                    }\n                }).then(function (response) {\n                    if (response.result) {\n                        _this.tableData = response.data.data;\n                    }\n                });\n            });\n        },\n        saveRole: function saveRole() {\n            var _this = this;\n\n            if (this.validate()) {\n                var data = void 0;\n                this.model.rolePermissionVoList = this.getRolePermissionVoList();\n                if (this.model.id) {\n                    data = {\n                        url: 'admin/role/' + _this.currentId,\n                        method: 'put',\n                        data: this.model\n                    };\n                } else {\n                    data = {\n                        url: 'admin/role',\n                        method: 'post',\n                        data: _this.model\n                    };\n                }\n\n                return new _promise2.default(function (resolve, reject) {\n                    (0, _fetch2.default)(data).then(function (response) {\n                        if (response.result) {\n                            _this.getRoles();\n                            _this.assistModel = _dctp2.default.utils.assign({}, _this.model);\n                            _this.activeIndex === 1 && _this.resetModel();\n                        }\n                        _this.getMessage(response.msg, response.result);\n                    });\n                });\n            }\n        },\n        deleteRole: function deleteRole() {\n            var _this = this;\n            return new _promise2.default(function (resolve, reject) {\n                (0, _fetch2.default)({\n                    url: 'admin/role/' + _this.currentId,\n                    method: 'delete'\n                }).then(function (response) {\n                    if (response.result) {\n                        _this.getRoles();\n                        _this.resetModel();\n                        _this.assistModel = null;\n                        _this.currentId = '';\n                    }\n                    _this.getMessage(response.msg, response.result);\n                });\n            });\n        },\n        confirmDelete: function confirmDelete() {\n            var _this2 = this;\n\n            if (this.currentId === '') {\n                this.$message.warning('请先选择一个角色再进行删除操作');\n                return;\n            }\n            this.$confirm('确定要删除该角色吗？', '提示', {\n                confirmButtonText: '确定',\n                cancelButtonText: '取消',\n                type: 'warning'\n            }).then(function () {\n                _this2.deleteRole();\n            }).catch(function () {});\n        },\n        changeTab: function changeTab(index) {\n            if (index === 0 && !this.currentId) {\n                this.$message.warning('请先选择一个角色');\n                return;\n            }\n            this.activeIndex = index;\n            if (index === 1) {\n                this.resetModel();\n            } else {\n                this.assistModel && this.setModel(this.assistModel);\n            }\n        },\n\n        // 查看单个菜单\n        view: function view(data) {\n            var _this = this;\n            this.currentId = data.id;\n            this.changeTab(0);\n            return new _promise2.default(function (resolve, reject) {\n                (0, _fetch2.default)({\n                    url: 'admin/role/' + _this.currentId,\n                    method: 'get'\n                }).then(function (response) {\n                    if (response.result) {\n                        _this.setModel(response.data);\n                    } else {\n                        _this.getMessage(response.msg, response.result);\n                    }\n                });\n            });\n        },\n        resetModel: function resetModel() {\n            var key = void 0;\n\n            for (key in this.model) {\n                this.model[key] = '';\n            }\n            this.rolePermissionVoList = [];\n        },\n        setModel: function setModel(data) {\n            var key = void 0;\n            this.assistModel = _dctp2.default.utils.assign({}, data);\n            if (this.activeIndex === 0) {\n                for (key in this.model) {\n                    this.model[key] = data[key];\n                }\n                this.setRolePermissionVoList();\n            }\n        },\n        setTabs: function setTabs() {\n            this.tabs = [{\n                label: '修改',\n                index: 0,\n                show: this.permission.edit\n            }, {\n                label: '新增',\n                index: 1,\n                show: this.permission.add\n            }];\n        },\n        fillPermission: function fillPermission(permission, data, level) {\n            var _this = this;\n\n            if (data) {\n                permission.push({\n                    label: data.name,\n                    value: data.id,\n                    left: level * 16,\n                    children: data.children && data.children.length,\n                    permissionVoList: data.permissionVoList\n                });\n\n                level++;\n                data.children && data.children.forEach(function (item, index) {\n                    if (item.children && item.children.length) {\n                        _this.fillPermission(permission, item, level);\n                    } else {\n                        permission.push({\n                            label: item.name,\n                            value: item.id,\n                            left: level * 16,\n                            children: 0,\n                            permissionVoList: item.permissionVoList\n                        });\n                    }\n                });\n            }\n        },\n        getRolePermissionVoList: function getRolePermissionVoList() {\n            var ids = [];\n\n            this.rolePermissionVoList && this.rolePermissionVoList.forEach(function (item) {\n                ids.push({\n                    permissionId: item\n                });\n            });\n\n            return ids;\n        },\n        setRolePermissionVoList: function setRolePermissionVoList() {\n            var ids = [];\n\n            this.model.rolePermissionVoList && this.model.rolePermissionVoList.forEach(function (item) {\n                ids.push(item.permissionId);\n            });\n\n            this.rolePermissionVoList = ids;\n        },\n        validate: function validate() {\n            if (!this.model.name) {\n                this.$message.error('请输入角色名称');\n                return false;\n            }\n\n            if (!this.rolePermissionVoList.length) {\n                this.$message.error('请选择角色权限');\n                return false;\n            }\n\n            return true;\n        }\n    },\n    created: function created() {\n        this.setTabs();\n        this.getRoles();\n    }\n};\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/81.ad8298d4027eda849c1a.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"system-menu\"\n  }, [_c('el-row', {\n    staticClass: \"height100\"\n  }, [_c('el-col', {\n    staticClass: \"left-side relative height100\",\n    attrs: {\n      \"span\": 5\n    }\n  }, [_c('div', {\n    staticClass: \"system-menu-list\"\n  }, [_c('el-tree', {\n    ref: \"tree\",\n    attrs: {\n      \"data\": _vm.tableData,\n      \"default-expand-all\": \"\",\n      \"node-key\": \"id\",\n      \"highlight-current\": \"\",\n      \"expand-on-click-node\": false,\n      \"current-node-key\": _vm.currentId,\n      \"props\": _vm.defaultProps\n    },\n    on: {\n      \"node-click\": _vm.view\n    }\n  })], 1)]), _vm._v(\" \"), _c('el-col', {\n    staticClass: \"system-menu-content pb-10\",\n    attrs: {\n      \"span\": 19\n    }\n  }, [_c('div', {\n    staticClass: \"el-tabs__header\"\n  }, [_c('div', {\n    staticClass: \"el-tabs__nav-wrap\"\n  }, [_c('div', {\n    staticClass: \"el-tabs__nav-scroll\"\n  }, [_c('div', {\n    staticClass: \"el-tabs__nav\"\n  }, _vm._l((_vm.tabs), function(item) {\n    return _c('div', {\n      staticClass: \"el-tabs__item\",\n      class: {\n        'is-active': _vm.activeIndex === item.index\n      },\n      on: {\n        \"click\": function($event) {\n          $event.stopPropagation();\n          _vm.changeTab(item.index)\n        }\n      }\n    }, [_vm._v(_vm._s(item.label))])\n  })), _vm._v(\" \"), _c('div', {\n    staticClass: \"fr\",\n    staticStyle: {\n      \"margin-right\": \"20px\",\n      \"margin-top\": \"7px\"\n    }\n  }, [_c('el-button', {\n    attrs: {\n      \"size\": \"small\"\n    },\n    on: {\n      \"click\": function($event) {\n        $event.stopPropagation();\n        _vm.confirmDelete($event)\n      }\n    }\n  }, [_vm._v(\"删除\")])], 1)])])]), _vm._v(\" \"), _c('div', [_c('el-row', {\n    attrs: {\n      \"gutter\": 16\n    }\n  }, [_c('el-col', {\n    staticClass: \"form-label text-right\",\n    attrs: {\n      \"span\": 3\n    }\n  }, [_vm._v(\"角色名称\")]), _vm._v(\" \"), _c('el-col', {\n    attrs: {\n      \"span\": 10\n    }\n  }, [_c('el-input', {\n    model: {\n      value: (_vm.model.name),\n      callback: function($$v) {\n        _vm.model.name = (typeof $$v === 'string' ? $$v.trim() : $$v)\n      },\n      expression: \"model.name\"\n    }\n  })], 1)], 1), _vm._v(\" \"), _c('el-row', {\n    attrs: {\n      \"gutter\": 16\n    }\n  }, [_c('el-col', {\n    staticClass: \"form-label text-right\",\n    attrs: {\n      \"span\": 3\n    }\n  }, [_vm._v(\"角色描述\")]), _vm._v(\" \"), _c('el-col', {\n    attrs: {\n      \"span\": 10\n    }\n  }, [_c('el-input', {\n    attrs: {\n      \"type\": \"textarea\",\n      \"resize\": \"none\",\n      \"autosize\": true\n    },\n    model: {\n      value: (_vm.model.description),\n      callback: function($$v) {\n        _vm.model.description = (typeof $$v === 'string' ? $$v.trim() : $$v)\n      },\n      expression: \"model.description\"\n    }\n  })], 1)], 1), _vm._v(\" \"), _c('el-row', {\n    attrs: {\n      \"gutter\": 16\n    }\n  }, [_c('el-col', {\n    staticClass: \"text-right\",\n    attrs: {\n      \"span\": 3\n    }\n  }, [_vm._v(\"角色权限\")]), _vm._v(\" \"), _c('el-col', {\n    attrs: {\n      \"span\": 21\n    }\n  }, [_c('el-checkbox-group', {\n    model: {\n      value: (_vm.rolePermissionVoList),\n      callback: function($$v) {\n        _vm.rolePermissionVoList = $$v\n      },\n      expression: \"rolePermissionVoList\"\n    }\n  }, _vm._l((_vm.permissionOptions), function(item) {\n    return _c('el-row', {\n      key: item.id,\n      attrs: {\n        \"gutter\": 16\n      }\n    }, [_c('el-col', {\n      attrs: {\n        \"span\": 7\n      }\n    }, [_c('div', {\n      style: ({\n        'padding-left': item.left + 'px'\n      })\n    }, [_c('span', {\n      staticClass: \"el-tree-node__expand-icon\",\n      class: item.children ? 'expanded' : 'is-leaf'\n    }), _vm._v(\" \"), _c('span', {\n      staticClass: \"el-tree-node__label\"\n    }, [_vm._v(_vm._s(item.label))])])]), _vm._v(\" \"), _c('el-col', {\n      attrs: {\n        \"span\": 17\n      }\n    }, _vm._l((item.permissionVoList), function(access) {\n      return _c('el-checkbox', {\n        key: access.id,\n        attrs: {\n          \"label\": access.id\n        }\n      }, [_vm._v(_vm._s(access.name))])\n    }))], 1)\n  }))], 1)], 1), _vm._v(\" \"), _c('el-row', [_c('el-col', {\n    attrs: {\n      \"span\": 3\n    }\n  }, [_vm._v(\" \")]), _vm._v(\" \"), _c('el-col', {\n    attrs: {\n      \"span\": 21\n    }\n  }, [_c('el-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": function($event) {\n        $event.stopPropagation();\n        _vm.saveRole($event)\n      }\n    }\n  }, [_vm._v(\"保存\")])], 1)], 1)], 1)])], 1)], 1)\n}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@13.0.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-74b785cc\",\"hasScoped\":false}!./~/_vue-loader@13.0.4@vue-loader/lib/selector.js?type=template&index=0!./src/views/system/role.vue\n// module id = 1029\n// module chunks = 81","var normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.0.4@vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.0.4@vue-loader/lib/selector?type=script&index=0!./role.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.0.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-74b785cc\\\",\\\"hasScoped\\\":false}!../../../node_modules/_vue-loader@13.0.4@vue-loader/lib/selector?type=template&index=0!./role.vue\"\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/system/role.vue\n// module id = 235\n// module chunks = 81","<template>\r\n    <div class=\"system-menu\">\r\n        <el-row class=\"height100\">\r\n            <el-col :span=\"5\" class=\"left-side relative height100\">\r\n                <div class=\"system-menu-list\">\r\n                    <el-tree\r\n                            :data=\"tableData\"\r\n                            default-expand-all\r\n                            node-key=\"id\"\r\n                            ref=\"tree\"\r\n                            highlight-current\r\n                            :expand-on-click-node=\"false\"\r\n                            :current-node-key=\"currentId\"\r\n                            @node-click=\"view\"\r\n                            :props=\"defaultProps\">\r\n                    </el-tree>\r\n                </div>\r\n            </el-col>\r\n            <el-col :span=\"19\" class=\"system-menu-content pb-10\">\r\n                <div class=\"el-tabs__header\">\r\n                    <div class=\"el-tabs__nav-wrap\">\r\n                        <div class=\"el-tabs__nav-scroll\">\r\n                            <div class=\"el-tabs__nav\">\r\n                                <div v-for=\"item in tabs\"\r\n                                     class=\"el-tabs__item\"\r\n                                     @click.stop=\"changeTab(item.index)\"\r\n                                     :class=\"{'is-active': activeIndex === item.index}\">{{item.label}}</div>\r\n                            </div>\r\n                            <div class=\"fr\" style=\"margin-right: 20px; margin-top: 7px;\">\r\n                                <el-button size=\"small\" @click.stop=\"confirmDelete\">删除</el-button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    <el-row :gutter=\"16\">\r\n                        <el-col :span=\"3\" class=\"form-label text-right\">角色名称</el-col>\r\n                        <el-col :span=\"10\">\r\n                            <el-input v-model.trim=\"model.name\"></el-input>\r\n                        </el-col>\r\n                    </el-row>\r\n                    <el-row :gutter=\"16\">\r\n                        <el-col :span=\"3\" class=\"form-label text-right\">角色描述</el-col>\r\n                        <el-col :span=\"10\">\r\n                            <el-input\r\n                                    v-model.trim=\"model.description\"\r\n                                    type=\"textarea\"\r\n                                    resize=\"none\"\r\n                                    :autosize=\"true\"></el-input>\r\n                        </el-col>\r\n                    </el-row>\r\n                    <el-row :gutter=\"16\">\r\n                        <el-col :span=\"3\" class=\"text-right\">角色权限</el-col>\r\n                        <el-col :span=\"21\">\r\n                            <el-checkbox-group v-model=\"rolePermissionVoList\">\r\n                                <el-row :gutter=\"16\" v-for=\"item in permissionOptions\" :key=\"item.id\">\r\n                                    <el-col :span=\"7\">\r\n                                        <div :style=\"{'padding-left': item.left + 'px'}\">\r\n                                            <span class=\"el-tree-node__expand-icon\" :class=\"item.children ? 'expanded' : 'is-leaf'\"></span>\r\n                                            <span class=\"el-tree-node__label\">{{item.label}}</span>\r\n                                        </div>\r\n                                    </el-col>\r\n                                    <el-col :span=\"17\">\r\n                                        <el-checkbox\r\n                                                v-for=\"access in item.permissionVoList\"\r\n                                                :key=\"access.id\"\r\n                                                :label=\"access.id\">{{access.name}}</el-checkbox>\r\n                                    </el-col>\r\n                                </el-row>\r\n\r\n                            </el-checkbox-group>\r\n                        </el-col>\r\n                    </el-row>\r\n                    <el-row>\r\n                        <el-col :span=\"3\">&nbsp;</el-col>\r\n                        <el-col :span=\"21\">\r\n                            <el-button type=\"primary\" @click.stop=\"saveRole\">保存</el-button>\r\n                        </el-col>\r\n                    </el-row>\r\n                </div>\r\n            </el-col>\r\n        </el-row>\r\n    </div>\r\n</template>\r\n\r\n<script type=\"text/jsx\">\r\n    import fetch from '@/utils/fetch';\r\n    import DCTP from '@/utils/dctp';\r\n\r\n    export default {\r\n        data() {\r\n            return {\r\n                tableData: [],\r\n                defaultProps: {\r\n                    children: 'children',\r\n                    label: 'name'\r\n                },\r\n                tabs: [],\r\n                currentId: '',\r\n                activeIndex: 1,\r\n                model: {\r\n                    description: '',\r\n                    id: '',\r\n                    name: '',\r\n                    rolePermissionVoList: '',\r\n                },\r\n                rolePermissionVoList: [],\r\n                checkboxOptions: {}\r\n            }\r\n        },\r\n        computed: {\r\n            permissionOptions() {\r\n                let permission = [];\r\n                let data = this.$store.state.permission.permission_menu;\r\n                data = data.length && data[0]['children'] ? data[0]['children'] : [];\r\n                let len = data.length;\r\n                let i;\r\n\r\n                for (i = 0; i < len; i++) {\r\n                    this.fillPermission(permission, data[i], 0);\r\n                }\r\n                return permission;\r\n            }\r\n        },\r\n        methods: {\r\n            getRoles() {\r\n                let _this = this;\r\n                return new Promise((resolve, reject) => {\r\n                    fetch({\r\n                        url: 'admin/roles',\r\n                        method: 'get',\r\n                        params: {\r\n                            pageNum: 1,\r\n                            pageSize: 1000\r\n                        }\r\n                    }).then(function (response) {\r\n                        if (response.result) {\r\n                            _this.tableData = response.data.data;\r\n                        }\r\n                    })\r\n                })\r\n            },\r\n            saveRole() {\r\n                let _this = this;\r\n\r\n                if (this.validate()) {\r\n                    let data;\r\n                    this.model.rolePermissionVoList = this.getRolePermissionVoList();\r\n                    if (this.model.id) {\r\n                        data = {\r\n                            url: 'admin/role/' + _this.currentId,\r\n                            method: 'put',\r\n                            data: this.model\r\n                        };\r\n                    } else {\r\n                        data = {\r\n                            url: 'admin/role',\r\n                            method: 'post',\r\n                            data: _this.model\r\n                        };\r\n                    }\r\n\r\n                    return new Promise((resolve, reject) => {\r\n                        fetch(data).then(function (response) {\r\n                            if (response.result) {\r\n                                _this.getRoles();\r\n                                _this.assistModel = DCTP.utils.assign({}, _this.model);\r\n                                _this.activeIndex === 1 && _this.resetModel();\r\n                            }\r\n                            _this.getMessage(response.msg, response.result);\r\n                        })\r\n                    })\r\n                }\r\n            },\r\n            deleteRole() {\r\n                let _this = this;\r\n                return new Promise((resolve, reject) => {\r\n                    fetch({\r\n                        url: 'admin/role/' + _this.currentId,\r\n                        method: 'delete'\r\n                    }).then(function (response) {\r\n                        if (response.result) {\r\n                            _this.getRoles();\r\n                            _this.resetModel();\r\n                            _this.assistModel = null;\r\n                            _this.currentId = '';\r\n                        }\r\n                        _this.getMessage(response.msg, response.result);\r\n                    })\r\n                })\r\n            },\r\n            confirmDelete() {\r\n                if (this.currentId === '') {\r\n                    this.$message.warning('请先选择一个角色再进行删除操作');\r\n                    return;\r\n                }\r\n                this.$confirm('确定要删除该角色吗？', '提示', {\r\n                    confirmButtonText: '确定',\r\n                    cancelButtonText: '取消',\r\n                    type: 'warning'\r\n                }).then(() => {\r\n                    this.deleteRole();\r\n                }).catch(() => {\r\n\r\n                });\r\n            },\r\n            changeTab(index) {\r\n                if (index === 0 && !this.currentId) {\r\n                    this.$message.warning('请先选择一个角色');\r\n                    return;\r\n                }\r\n                this.activeIndex = index;\r\n                if (index === 1) {\r\n                    this.resetModel();\r\n                } else {\r\n                    this.assistModel && this.setModel(this.assistModel);\r\n                }\r\n            },\r\n            // 查看单个菜单\r\n            view(data) {\r\n                let _this = this;\r\n                this.currentId = data.id;\r\n                this.changeTab(0);\r\n                return new Promise((resolve, reject) => {\r\n                    fetch({\r\n                        url: 'admin/role/' + _this.currentId,\r\n                        method: 'get'\r\n                    }).then(function (response) {\r\n                        if (response.result) {\r\n                            _this.setModel(response.data);\r\n                        } else {\r\n                            _this.getMessage(response.msg, response.result);\r\n                        }\r\n                    })\r\n                })\r\n            },\r\n            resetModel() {\r\n                let key;\r\n\r\n                for (key in this.model) {\r\n                    this.model[key] = '';\r\n                }\r\n                this.rolePermissionVoList = [];\r\n            },\r\n            setModel(data) {\r\n                let key;\r\n                this.assistModel = DCTP.utils.assign({}, data);\r\n                if (this.activeIndex === 0) {\r\n                    for (key in this.model) {\r\n                        this.model[key] = data[key];\r\n                    }\r\n                    this.setRolePermissionVoList();\r\n                }\r\n            },\r\n            setTabs() {\r\n                this.tabs = [{\r\n                    label: '修改',\r\n                    index: 0,\r\n                    show: this.permission.edit\r\n                }, {\r\n                    label: '新增',\r\n                    index: 1,\r\n                    show: this.permission.add\r\n                }];\r\n            },\r\n            fillPermission(permission, data, level) {\r\n                let _this = this;\r\n\r\n                if (data) {\r\n                    permission.push({\r\n                        label: data.name,\r\n                        value: data.id,\r\n                        left: level * 16,\r\n                        children: data.children && data.children.length,\r\n                        permissionVoList: data.permissionVoList\r\n                    });\r\n\r\n                    level++;\r\n                    data.children && data.children.forEach((item, index) => {\r\n                        if (item.children && item.children.length) {\r\n                            _this.fillPermission(permission, item, level);\r\n                        } else {\r\n                            permission.push({\r\n                                label: item.name,\r\n                                value: item.id,\r\n                                left: level * 16,\r\n                                children: 0,\r\n                                permissionVoList: item.permissionVoList\r\n                            })\r\n                        }\r\n                    });\r\n                }\r\n            },\r\n            getRolePermissionVoList() {\r\n                let ids = [];\r\n\r\n                this.rolePermissionVoList && this.rolePermissionVoList.forEach(item => {\r\n                    ids.push({\r\n                        permissionId: item\r\n                    });\r\n                });\r\n\r\n                return ids;\r\n            },\r\n            setRolePermissionVoList() {\r\n                let ids = [];\r\n\r\n                this.model.rolePermissionVoList && this.model.rolePermissionVoList.forEach(item => {\r\n                    ids.push(item.permissionId);\r\n                });\r\n\r\n                this.rolePermissionVoList = ids;\r\n            },\r\n            validate() {\r\n                if (!this.model.name) {\r\n                    this.$message.error('请输入角色名称');\r\n                    return false;\r\n                }\r\n\r\n                if (!this.rolePermissionVoList.length) {\r\n                    this.$message.error('请选择角色权限');\r\n                    return false;\r\n                }\r\n\r\n                return true;\r\n            }\r\n        },\r\n        created() {\r\n            this.setTabs();\r\n            this.getRoles();\r\n        }\r\n    }\r\n</script>\n\n\n// WEBPACK FOOTER //\n// src/views/system/role.vue?a11ddf6e"],"sourceRoot":""}