webpackJsonp([67],{1032:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"p-20"},[a("div",{staticClass:"filter-container",staticStyle:{"margin-bottom":"20px"}},[a("span",[t._v("标题：")]),t._v(" "),a("el-input",{staticClass:"filter-item",staticStyle:{width:"300px"},attrs:{placeholder:"请输入标题"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13))return null;t.initData(e)}},model:{value:t.queryData.title,callback:function(e){t.queryData.title=e},expression:"queryData.title"}}),t._v(" "),a("span",[t._v("持币名称：")]),t._v(" "),a("el-select",{attrs:{clearable:"",placeholder:"请输入持币名称"},model:{value:t.queryData.holdCoinId,callback:function(e){t.queryData.holdCoinId=e},expression:"queryData.holdCoinId"}},t._l(t.virtualList,function(t){return a("el-option",{key:t.baseSeq,attrs:{label:t.chineseName,value:t.baseSeq}})})),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{size:"small"},on:{click:t.initData}},[t._v("查询")]),t._v(" "),t.permission.add?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.showAddDialog}},[t._v("新增")]):t._e()],1),t._v(" "),a("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"80"}}),t._v(" "),t._l(t.tableHeader,function(t){return a("el-table-column",{key:t.prop,attrs:{label:t.label,prop:t.prop,width:t.width,"min-width":t.minWidth,align:t.align,formatter:t.formatter,"show-overflow-tooltip":""}})}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("ul",{staticStyle:{"list-style":"none",padding:"0px"}},[a("li",{staticStyle:{float:"left",width:"30px"}},[t.permission.edit?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.getCategory(e.row.id)}}},[t._v("修改\n                        ")]):t._e()],1),t._v(" "),a("li",{staticStyle:{float:"left",width:"30px"}},[t.permission.delete?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.showDeleteDialog(e.row.id,"删除")}}},[t._v("删除\n                        ")]):t._e()],1),t._v(" "),a("li",{staticStyle:{float:"left",width:"30px"}},[t.permission.verify?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.showDeleteDialog(e.row.id,"审核")}}},[t._v("审核\n                        ")]):t._e()],1),t._v(" "),a("li",{staticStyle:{float:"left",width:"30px"}},[t.permission.sendCoin?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.showDeleteDialog(e.row.id,"发币")}}},[t._v("发币\n                        ")]):t._e()],1),t._v(" "),a("li",{staticStyle:{float:"left",width:"30px"}},[t.permission.view?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.getDetails(e.row.id)}}},[t._v("查看记录\n                        ")]):t._e()],1)])]}}])})],2),t._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":t.queryData.pageNum,"page-sizes":[10,20,30,50],"page-size":t.queryData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.userPageSize,"current-change":t.userPage}})],1),t._v(" "),a("el-dialog",{attrs:{title:"新增分红计划",visible:t.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisible=e},close:t.dialogClose}},[a("el-form",{ref:"data",attrs:{model:t.data,rules:t.rules}},[a("el-form-item",{attrs:{"label-width":t.itemWidth,label:"*主题-中文",prop:"title"}},[a("el-input",{staticClass:"input-short",attrs:{"auto-complete":"off"},model:{value:t.data.title,callback:function(e){t.data.title=e},expression:"data.title"}})],1),t._v(" "),a("el-form-item",{attrs:{"label-width":t.itemWidth,label:"*主题-英文",prop:"titleEn"}},[a("el-input",{staticClass:"input-short",attrs:{"auto-complete":"off"},model:{value:t.data.titleEn,callback:function(e){t.data.titleEn=e},expression:"data.titleEn"}})],1),t._v(" "),a("el-form-item",{attrs:{"label-width":t.itemWidth,label:"持币名称",prop:"holdCoinId"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.data.holdCoinId,callback:function(e){t.data.holdCoinId=e},expression:"data.holdCoinId"}},t._l(t.virtualList,function(t){return a("el-option",{key:t.baseSeq,attrs:{label:t.chineseName,value:t.baseSeq}})}))],1),t._v(" "),a("el-form-item",{attrs:{"label-width":t.itemWidth,label:"分红币名称",prop:"sendCoinId"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.data.sendCoinId,callback:function(e){t.data.sendCoinId=e},expression:"data.sendCoinId"}},t._l(t.virtualList,function(t){return a("el-option",{key:t.baseSeq,attrs:{label:t.chineseName,value:t.baseSeq}})}))],1),t._v(" "),a("el-form-item",{attrs:{"label-width":t.itemWidth,label:"*分红币总数量",prop:"amount"}},[a("el-input",{staticClass:"input-short",attrs:{"auto-complete":"off"},model:{value:t.data.amount,callback:function(e){t.data.amount=e},expression:"data.amount"}})],1),t._v(" "),a("el-form-item",{attrs:{"label-width":t.itemWidth,label:"*分红/持有比例",prop:"ratio"}},[a("el-input",{staticClass:"input-short",attrs:{"auto-complete":"off"},model:{value:t.data.ratio,callback:function(e){t.data.ratio=e},expression:"data.ratio"}})],1),t._v(" "),a("el-form-item",{attrs:{"label-width":t.itemWidth,label:"*有效开始时间",prop:"startTime"}},[a("el-date-picker",{attrs:{align:"right",clearable:!0,type:"datetime",placeholder:"选择时间"},on:{change:t.handleChangeStartTime},model:{value:t.data.startTime,callback:function(e){t.data.startTime=e},expression:"data.startTime"}})],1),t._v(" "),a("el-form-item",{attrs:{"label-width":t.itemWidth,label:"*有效结束时间",prop:"endTime"}},[a("el-date-picker",{attrs:{align:"right",clearable:!0,type:"datetime",placeholder:"选择时间"},on:{change:t.handleChangeEndTime},model:{value:t.data.endTime,callback:function(e){t.data.endTime=e},expression:"data.endTime"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.validate}},[t._v("保 存")])],1)],1),t._v(" "),a("el-dialog",{staticClass:"p-20",attrs:{title:"查看记录",visible:t.dialogTableVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[a("span",[t._v("会员信息：")]),t._v(" "),a("el-input",{staticClass:"filter-item",staticStyle:{width:"300px",margin:"10px"},attrs:{placeholder:"请输入会员信息"},model:{value:t.dialogQueryData.queryStr,callback:function(e){t.dialogQueryData.queryStr=e},expression:"dialogQueryData.queryStr"}}),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{type:"primary"},on:{click:function(e){e.stopPropagation(),t.dialogQuery(e)}}},[t._v("查询")]),t._v(" "),a("el-table",{attrs:{data:t.dialogTableData}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"80"}}),t._v(" "),t._l(t.dialogTableHeader,function(t){return a("el-table-column",{key:t.prop,attrs:{label:t.label,prop:t.prop,width:t.width,"min-width":t.minWidth,align:t.align,formatter:t.formatter,"show-overflow-tooltip":""}})})],2),t._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":t.dialogQueryData.pageNum,"page-sizes":[10,20,30,50],"page-size":t.dialogQueryData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.dialogTotal},on:{"size-change":t.dialogUserPageSize,"current-change":t.dialogUserPage}})],1)],1)],1)},l=[],n={render:i,staticRenderFns:l};e.a=n},211:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(837),l=a.n(i),n=a(1032),r=a(23),o=r(l.a,n.a,null,null,null);e.default=o.exports},339:function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function l(t,e,a,i,l,n){var o=void 0,s=void 0,u=!1;if(a=a||-1,l=l||-1,n=n||-1,!d.default.utils.isEmpty(t)&&!d.default.utils.isEmpty(e)&&!d.default.utils.isNaN(t)&&!d.default.utils.isNaN(e)&&(0==t||Number(t))&&(0==e||Number(e))){switch(i){case"add":s=new r.default(t),o=s.plus(e);break;case"subtract":s=new r.default(t),o=s.minus(e);break;case"multiply":s=new r.default(t),o=s.times(e);break;case"divide":if(!Number(e))return void(u=!0);s=new r.default(t),o=s.div(e)}if(!u){if(a>=0){var c=o.toFixed();if(c.indexOf(".")>0&&c.split(".")[1].length>a)if(1===l)o=o.toFixed(a);else if(2===l){var f=new r.default(10);f=f.pow(a);var p=new r.default(c);p=p.times(f).toFixed(),p=p.substring(0,p.indexOf(".")),p=new r.default(p),o=p.div(f).toFixed()}else if(3===l){var h=new r.default(10);h=h.pow(a).toFixed();var m=new r.default(c);m=m.times(h),m=m.plus(1).toFixed(),m=m.substring(0,m.indexOf(".")),m=new r.default(m),o=m.div(h).toFixed()}else o=o.toFixed(a);else o=2===n?o.toFixed(a):c}else o=o.toFixed();return o}}}Object.defineProperty(e,"__esModule",{value:!0});var n=a(!function(){var t=new Error('Cannot find module "big.js"');throw t.code="MODULE_NOT_FOUND",t}()),r=i(n),o=a(11),d=i(o),s={add:function(t,e,a,i,n){return l(t,e,a,"add",i,n)},subtract:function(t,e,a,i,n){return l(t,e,a,"subtract",i,n)},multiply:function(t,e,a,i,n){return l(t,e,a,"multiply",i,n)},divide:function(t,e,a,i,n){return l(t,e,a,"divide",i,n)}};e.default=s},837:function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var l=a(!function(){var t=new Error('Cannot find module "babel-runtime/core-js/promise"');throw t.code="MODULE_NOT_FOUND",t}()),n=i(l),r=a(24),o=i(r),d=a(11),s=i(d),u=a(339),c=i(u);e.default={data:function(){var t=function(t,e,a){""===e&&a(new Error("不能为空")),a()};return{itemWidth:"160px",dialogVisible:!1,dialogTableVisible:!1,data:{id:"",title:"",titleEn:"",holdCoinId:"",holdName:"",sendCoinId:"",sendName:"",radio:"",amount:"",ratio:"",startTime:"",endTime:"",type:"1",status:"",auditName:"",auditTime:"",undeliveredCount:"",deliveredCount:""},action:"",rules:{title:[{validator:t,trigger:"blur"}],titleEn:[{validator:t,trigger:"blur"}],holdCoinId:[{validator:t,trigger:"blur"}],sendCoinId:[{validator:t,trigger:"blur"}],amount:[{validator:t,trigger:"blur"}],ratio:[{validator:t,trigger:"blur"}],startTime:[{validator:t,trigger:"blur"}],endTime:[{validator:t,trigger:"blur"}]},queryData:{title:"",holdCoinId:"",pageNum:1,pageSize:10,type:"1"},total:0,dialogQueryData:{queryStr:"",pageNum:1,pageSize:10,type:"1"},dialogQueryId:"",dialogTotal:0,tableData:[],tableHeader:[{label:"标题",prop:"title",width:120},{label:"状态",prop:"status",width:120,formatter:function(t,e,a){return 1===a?"暂存":2===a?"已审核":""}},{label:"持币名称",prop:"holdName",width:120},{label:"分红币名称",prop:"sendName",width:120},{label:"分红币总数量",prop:"amount",width:120,formatter:function(t,e,a){return c.default.multiply(a,1,12,2,1).toString()}},{label:"分红比例",prop:"ratio",width:120,formatter:function(t,e,a){return c.default.multiply(a,1,12,2,1).toString()}},{label:"待发送",prop:"undeliveredCount",width:80,formatter:function(t,e,a){return c.default.multiply(a,1,12,2,1).toString()}},{label:"已发送",prop:"deliveredCount",width:80,formatter:function(t,e,a){return c.default.multiply(a,1,12,2,1).toString()}},{label:"有效开始时间",prop:"startTime",width:180,formatter:function(t,e,a){return s.default.utils.parseDateTimeStr(a)}},{label:"有效结束时间",prop:"endTime",width:180,formatter:function(t,e,a){return s.default.utils.parseDateTimeStr(a)}},{label:"审核人",prop:"auditName",width:120},{label:"审核时间",prop:"auditTime",width:180,formatter:function(t,e,a){return s.default.utils.parseDateTimeStr(a)}}],dialogTableData:[],dialogTableHeader:[{label:"UID",prop:"userId",width:80},{label:"手机",prop:"userPhone",width:150},{label:"邮箱",prop:"email",width:160},{label:"真实姓名",prop:"realName",width:120},{label:"状态",prop:"status",width:80,formatter:function(t,e,a){return 1===a?"未发送":2===a?"已发送":""}},{label:"分得数额",prop:"amount",width:120},{label:"创建日期",prop:"createTime",width:180,formatter:function(t,e,a){return s.default.utils.parseDateTimeStr(a)}}],virtualList:[]}},created:function(){this.initData()},methods:{addCategory:function(){var t=this;return new n.default(function(e,a){(0,o.default)({url:"admin/shareplan",method:"post",data:t.data}).then(function(e){e.result&&(t.dialogVisible=!1,t.initData()),t.getMessage(e.msg,e.result)}).catch()})},showAddDialog:function(){this.dialogVisible=!0,this.action="add"},validate:function(){var t=this;this.$refs.data.validate(function(e){if(e)switch(t.action){case"add":t.addCategory();break;default:t.modify()}})},dialogClose:function(){this.resetData()},setData:function(t){var e=void 0;for(e in this.data)this.data[e]=null===t[e]?"":t[e]},resetData:function(){var t=void 0;this.$refs.data.resetFields();for(t in this.data)switch(t){case"type":this.data[t]="1";break;default:this.data[t]=""}this.action=""},getList:function(){var t=this;return new n.default(function(e,a){(0,o.default)({url:"admin/shareplan",method:"get",params:t.queryData}).then(function(e){e.result&&(t.tableData=e.data.data,t.total=e.data.page.count)}).catch()})},getCategory:function(t){var e=this;return new n.default(function(a,i){(0,o.default)({url:"admin/shareplan/"+t,method:"get"}).then(function(t){t.result&&(e.setData(t.data),e.dialogVisible=!0)}).catch()})},deleteCategory:function(t){var e=this;return new n.default(function(a,i){(0,o.default)({url:"admin/shareplan/"+t,method:"delete"}).then(function(t){t.result&&e.initData(),e.getMessage(t.msg,t.result)}).catch()})},showDeleteDialog:function(t,e){var a=this;this.$confirm("确认"+e+"？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){switch(e){case"删除":a.deleteCategory(t);break;case"审核":a.verify(t);break;case"发币":a.send(t)}}).catch(function(){a.$message.info("操作取消")})},modify:function(){var t=this;return new n.default(function(e,a){(0,o.default)({url:"admin/shareplan",method:"put",data:t.data}).then(function(e){e.result&&(t.dialogVisible=!1,t.initData()),t.getMessage(e.msg,e.result)}).catch()})},query:function(){var t=this;return new n.default(function(e,a){(0,o.default)({url:"admin/shareplan/query",method:"get",params:t.queryData}).then(function(e){e.result&&(t.tableData=e.data.data,t.total=e.data.page.count)}).catch()})},initData:function(){""===this.queryData.title&&""===this.queryData.holdCoinId?(this.getList(),this.getVirtualCoin()):this.query()},userPage:function(t){this.queryData.pageNum=t,this.initData()},userPageSize:function(t){this.queryData.pageSize=t,this.initData()},dialogUserPage:function(t){this.dialogQueryData.pageNum=t,this.getDetails(this.dialogQueryId)},dialogUserPageSize:function(t){this.dialogQueryData.pageSize=t,this.getDetails(this.dialogQueryId)},getVirtualCoin:function(){var t=this;return new n.default(function(e,a){(0,o.default)({url:"admin/virtualcoinbases",method:"get"}).then(function(e){e.result&&(t.virtualList=e.data.data)}).catch()})},handleChangeStartTime:function(t){this.data.startTime=t},handleChangeEndTime:function(t){this.data.endTime=t},verify:function(t){var e=this;return new n.default(function(a,i){(0,o.default)({url:"admin/shareplan/check/"+t,method:"put"}).then(function(t){t.result&&e.initData(),e.getMessage(t.msg,t.result)}).catch()})},send:function(t){var e=this;return new n.default(function(a,i){(0,o.default)({url:"admin/shareplan/send/"+t,method:"put"}).then(function(t){t.result&&e.initData(),e.getMessage(t.msg,t.result)}).catch()})},getDetails:function(t){var e=this;return new n.default(function(a,i){(0,o.default)({url:"admin/shareplan/detail/"+t,method:"get",params:e.dialogQueryData}).then(function(a){a.result?(e.dialogTableVisible=!0,e.dialogTableData=a.data.data,console.log(a.data.data),e.dialogQueryId=t,e.dialogTotal=a.data.page.count):e.getMessage(a.msg,a.result)}).catch()})},dialogQuery:function(t){var e=this;return new n.default(function(t,a){(0,o.default)({url:"admin/shareplan/detail/"+e.dialogQueryId+"/query",method:"get",params:e.dialogQueryData}).then(function(t){t.result&&(e.dialogTableData=t.data.data,console.log(t.data.data),e.dialogTotal=t.data.page.count)}).catch()})}}}}});
//# sourceMappingURL=67.e9848ad4408457af40c0.js.map