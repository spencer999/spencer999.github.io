webpackJsonp([37],{1031:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"p-20"},[a("div",{staticClass:"filter-container",staticStyle:{"margin-bottom":"20px"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"300px"},attrs:{placeholder:"请输入关键词"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13))return null;t.initData(e)}},model:{value:t.categoryQuery.queryStr,callback:function(e){t.categoryQuery.queryStr=e},expression:"categoryQuery.queryStr"}}),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{size:"small"},on:{click:t.initData}},[t._v("查询")]),t._v(" "),t.permission.add?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.showAddDialog}},[t._v("新增")]):t._e()],1),t._v(" "),a("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"80"}}),t._v(" "),t._l(t.tableHeader,function(t){return a("el-table-column",{key:t.prop,attrs:{label:t.label,prop:t.prop,width:t.width,"min-width":t.minWidth,align:t.align,formatter:t.formatter,"show-overflow-tooltip":""}})}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("ul",{staticStyle:{"list-style":"none",padding:"0px"}},[a("li",{staticStyle:{float:"left",width:"30px"}},[t.permission.edit?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.getCategory(e.row.id)}}},[t._v("修改\n                        ")]):t._e()],1),t._v(" "),a("li",{staticStyle:{float:"left",width:"30px"}},[t.permission.delete?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.showDeleteDialog(e.row.id)}}},[t._v("删除\n                        ")]):t._e()],1),t._v(" "),1===e.row.status?a("li",{staticStyle:{float:"left",width:"30px"}},[t.permission.enable?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.enableDisable(2,e.row.id,"启用")}}},[t._v("启用\n                        ")]):t._e()],1):2===e.row.status?a("li",{staticStyle:{float:"left",width:"30px"}},[t.permission.disable?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.enableDisable(1,e.row.id,"禁用")}}},[t._v("禁用\n                        ")]):t._e()],1):t._e()])]}}])})],2),t._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":t.categoryQuery.pageNum,"page-sizes":[10,20,30,50],"page-size":t.categoryQuery.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.userPageSize,"current-change":t.userPage}})],1),t._v(" "),a("el-dialog",{attrs:{title:"自动交易信息",visible:t.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisible=e},close:t.dialogClose}},[a("el-form",{ref:"data",attrs:{model:t.data,rules:t.rules}},[a("el-form-item",{attrs:{"label-width":t.itemWidth,label:"*交易类型",prop:"tradeMappingId"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.data.tradeMappingId,callback:function(e){t.data.tradeMappingId=e},expression:"data.tradeMappingId"}},t._l(t.mappingList,function(t){return a("el-option",{key:t.id,attrs:{label:t.baseName+"-"+t.tradeName,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{"label-width":t.itemWidth,label:"*类型",prop:"tradeType"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.data.tradeType,callback:function(e){t.data.tradeType=e},expression:"data.tradeType"}},t._l(t.tradeTypeOptions,function(t){return a("el-option",{key:t.key,attrs:{label:t.value,value:t.key}})}))],1),t._v(" "),a("el-form-item",{attrs:{"label-width":t.itemWidth,label:"*用户UID",prop:"userId"}},[a("el-input-number",{staticClass:"input-short",attrs:{min:1,max:999999999,"auto-complete":"off"},model:{value:t.data.userId,callback:function(e){t.data.userId=e},expression:"data.userId"}})],1),t._v(" "),a("el-form-item",{attrs:{"label-width":t.itemWidth,label:"*最小交易数量",prop:"minQuantity"}},[a("el-input",{staticClass:"input-short",attrs:{"auto-complete":"off"},model:{value:t.data.minQuantity,callback:function(e){t.data.minQuantity=e},expression:"data.minQuantity"}})],1),t._v(" "),a("el-form-item",{attrs:{"label-width":t.itemWidth,label:"*最大交易数量",prop:"maxQuantity"}},[a("el-input",{staticClass:"input-short",attrs:{"auto-complete":"off"},model:{value:t.data.maxQuantity,callback:function(e){t.data.maxQuantity=e},expression:"data.maxQuantity"}})],1),t._v(" "),a("el-form-item",{attrs:{"label-width":t.itemWidth,label:"*取价类型",prop:"priceType"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.data.priceType,callback:function(e){t.data.priceType=e},expression:"data.priceType"}},t._l(t.priceTypeOptions,function(t){return a("el-option",{key:t.key,attrs:{label:t.value,value:t.key}})}))],1),t._v(" "),a("el-form-item",{attrs:{"label-width":t.itemWidth,label:"*最小浮动价格",prop:"minPrice"}},[a("el-input",{staticClass:"input-short",attrs:{"auto-complete":"off"},model:{value:t.data.minPrice,callback:function(e){t.data.minPrice=e},expression:"data.minPrice"}})],1),t._v(" "),a("el-form-item",{attrs:{"label-width":t.itemWidth,label:"*最大浮动价格",prop:"maxPrice"}},[a("el-input",{staticClass:"input-short",attrs:{"auto-complete":"off"},model:{value:t.data.maxPrice,callback:function(e){t.data.maxPrice=e},expression:"data.maxPrice"}})],1),t._v(" "),a("el-form-item",{attrs:{"label-width":t.itemWidth,label:"*多少分钟一次",prop:"intervalMinute"}},[a("el-input-number",{staticClass:"input-short",attrs:{min:1,max:999999999,"auto-complete":"off"},model:{value:t.data.intervalMinute,callback:function(e){t.data.intervalMinute=e},expression:"data.intervalMinute"}})],1),t._v(" "),a("el-form-item",{attrs:{"label-width":t.itemWidth,label:"*开始前随机停几秒",prop:"suspendSecond"}},[a("el-input-number",{staticClass:"input-short",attrs:{min:1,max:999999999,"auto-complete":"off"},model:{value:t.data.suspendSecond,callback:function(e){t.data.suspendSecond=e},expression:"data.suspendSecond"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.validate}},[t._v("保 存")])],1)],1)],1)},n=[],r={render:i,staticRenderFns:n};e.a=r},236:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(862),n=a.n(i),r=a(1031),l=a(23),o=l(n.a,r.a,null,null,null);e.default=o.exports},297:function(t,e,a){"use strict";function i(t){return["admin","editor"].indexOf(t.trim())>=0}function n(t){return/^(https?|ftp):\/\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\/($|[a-zA-Z0-9.,?'\\+&%$#=~_-]+))*$/.test(t)}function r(t){return/^[a-z]+$/.test(t)}function l(t){return/^[A-Z]+$/.test(t)}function o(t){return/^[A-Za-z]{0,40}$/.test(t)}function u(t){return/^[\u4e00-\u9fa5]{0,10}$/.test(t)}function d(t){var e=new RegExp(/[\u4E00-\u9FA5]/,"g");return t.replace(e,"00").length}function s(t){return/^[A-Za-z0-9]+$/.test(t)}function c(t){return/^(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9])$/.test(t)}function p(t){return/^([0-9]|[1-9]\d{1,3}|[1-5]\d{4}|6[0-5]{2}[0-3][0-5])$/.test(t)}function f(t){return/^[0-9]+(\.[0-9]{0,8})?$/.test(t)}function m(t){return/^[0-9]+(\.[0-9]{0,6})?$/.test(t)}function h(t){return/^[0-9]+(\.[0-9]{0,4})?$/.test(t)}function v(t){return/^[0-9]+(\.[0-9]{0,2})?$/.test(t)}function g(t){return/^(([1][0-9]|[2][0-3]|[0][0-9]|[0-9]):([0-5][0-9])-([1][0-9]|[2][0-3]|[0][0-9]|[0-9]):([0-5][0-9]))$/.test(t)}function b(t){return/^(([1][0-9]|[2][0-3]|[0][0-9]|[0-9]):([0-5][0-9])-([1][0-9]|[2][0-3]|[0][0-9]|[0-9]):([0-5][0-9]))$|^(([1][0-9]|[2][0-3]|[0][0-9]|[0-9]):([0-5][0-9])-([1][0-9]|[2][0-3]|[0][0-9]|[0-9]):([0-5][0-9])),(([1][0-9]|[2][0-3]|[0][0-9]|[0-9]):([0-5][0-9])-([1][0-9]|[2][0-3]|[0][0-9]|[0-9]):([0-5][0-9]))$/.test(t)}function y(t){return/^((((1[6-9]|[2-9]\d)\d{2})-(0?[13578]|1[02])-(0?[1-9]|[12]\d|3[01]))|(((1[6-9]|[2-9]\d)\d{2})-(0?[13456789]|1[012])-(0?[1-9]|[12]\d|30))|(((1[6-9]|[2-9]\d)\d{2})-0?2-(0?[1-9]|1\d|2[0-8]))|(((1[6-9]|[2-9]\d)(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00))-0?2-29-))([# ])([1][0-9]|[2][0-3]|[0][0-9]|[0-9]):([0-5][0-9])$/.test(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.isvalidUsername=i,e.validateURL=n,e.validateLowerCase=r,e.validateUpperCase=l,e.validatAlphabets=o,e.validateChinese=u,e.characterSize=d,e.validatePassword=s,e.validateIP=c,e.validateIpPort=p,e.validateEightDecimal=f,e.validateSixDecimal=m,e.validateFourDecimal=h,e.validateTwoDecimal=v,e.validateTimeArea=g,e.validateTimeTwoArea=b,e.validateDateTime=y},339:function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t,e,a,i,n,r){var o=void 0,d=void 0,s=!1;if(a=a||-1,n=n||-1,r=r||-1,!u.default.utils.isEmpty(t)&&!u.default.utils.isEmpty(e)&&!u.default.utils.isNaN(t)&&!u.default.utils.isNaN(e)&&(0==t||Number(t))&&(0==e||Number(e))){switch(i){case"add":d=new l.default(t),o=d.plus(e);break;case"subtract":d=new l.default(t),o=d.minus(e);break;case"multiply":d=new l.default(t),o=d.times(e);break;case"divide":if(!Number(e))return void(s=!0);d=new l.default(t),o=d.div(e)}if(!s){if(a>=0){var c=o.toFixed();if(c.indexOf(".")>0&&c.split(".")[1].length>a)if(1===n)o=o.toFixed(a);else if(2===n){var p=new l.default(10);p=p.pow(a);var f=new l.default(c);f=f.times(p).toFixed(),f=f.substring(0,f.indexOf(".")),f=new l.default(f),o=f.div(p).toFixed()}else if(3===n){var m=new l.default(10);m=m.pow(a).toFixed();var h=new l.default(c);h=h.times(m),h=h.plus(1).toFixed(),h=h.substring(0,h.indexOf(".")),h=new l.default(h),o=h.div(m).toFixed()}else o=o.toFixed(a);else o=2===r?o.toFixed(a):c}else o=o.toFixed();return o}}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(!function(){var t=new Error('Cannot find module "big.js"');throw t.code="MODULE_NOT_FOUND",t}()),l=i(r),o=a(11),u=i(o),d={add:function(t,e,a,i,r){return n(t,e,a,"add",i,r)},subtract:function(t,e,a,i,r){return n(t,e,a,"subtract",i,r)},multiply:function(t,e,a,i,r){return n(t,e,a,"multiply",i,r)},divide:function(t,e,a,i,r){return n(t,e,a,"divide",i,r)}};e.default=d},862:function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=a(!function(){var t=new Error('Cannot find module "babel-runtime/core-js/promise"');throw t.code="MODULE_NOT_FOUND",t}()),r=i(n),l=a(24),o=i(l),u=a(297),d=a(11),s=i(d),c=a(339),p=i(c),f=[{key:0,value:"买+卖"}],m=[{key:0,value:"平台自定义"}];e.default={data:function(){var t=function(t,e,a){""===e&&a(new Error("不能为空")),a()},e=function(t,e,a){(""===e||!(0,u.validateEightDecimal)(e)||1*e>999999999||1*e<1e-8)&&a(new Error("请输入正确的数值")),a()};return{itemWidth:"160px",dialogVisible:!1,data:{id:"",tradeMappingId:"",tradeType:"",userId:"",minQuantity:"",maxQuantity:"",priceType:"",minPrice:"",maxPrice:"",intervalMinute:"",suspendSecond:""},action:"",rules:{tradeMappingId:[{validator:t,trigger:"blur"}],tradeType:[{validator:t,trigger:"blur"}],userId:[{validator:t,trigger:"blur"}],minQuantity:[{validator:e,trigger:"blur"}],maxQuantity:[{validator:e,trigger:"blur"}],priceType:[{validator:t,trigger:"blur"}],minPrice:[{validator:e,trigger:"blur"}],maxPrice:[{validator:e,trigger:"blur"}],intervalMinute:[{validator:e,trigger:"blur"}],suspendSecond:[{validator:e,trigger:"blur"}]},categoryQuery:{queryStr:"",pageNum:1,pageSize:10},total:0,tableData:[],tableHeader:[{label:"UID",prop:"userId",width:65},{label:"类型",prop:"tradeType",width:100,formatter:function(t,e,a){return 0===a?"买+卖":"未知"}},{label:"价格同步类型",prop:"priceType",width:120,formatter:function(t,e,a){return 0===a?"平台自定义":"未知"}},{label:"状态",prop:"status",width:80,align:"center",formatter:function(t,e,a){return 1===a?"未生效":2===a?"生效":"未知"}},{label:"交易类型",prop:"tradeName",width:130},{label:"最小交易数量",prop:"minQuantity",width:180,formatter:function(t,e,a){return p.default.multiply(a,1,12,2,1).toString()}},{label:"最大交易数量",prop:"maxQuantity",minWidth:120,formatter:function(t,e,a){return p.default.multiply(a,1,12,2,1).toString()}},{label:"最小浮动价",prop:"minPrice",minWidth:120,formatter:function(t,e,a){return p.default.multiply(a,1,12,2,1).toString()}},{label:"最大浮动价",prop:"maxPrice",width:120,formatter:function(t,e,a){return p.default.multiply(a,1,12,2,1).toString()}},{label:"多少分钟一次",prop:"intervalMinute",width:120},{label:"开始前随机停几秒",prop:"suspendSecond",width:170},{label:"创建时间",prop:"createTime",width:170,formatter:function(t,e,a){return s.default.utils.parseDateTimeStr(a)}}],mappingList:[],tradeTypeOptions:f,priceTypeOptions:m}},created:function(){this.initData(),this.getMapping()},methods:{addCategory:function(){var t=this;return new r.default(function(e,a){(0,o.default)({url:"admin/trademapauto",method:"post",data:t.data}).then(function(e){e.result&&(t.dialogVisible=!1,t.initData()),t.getMessage(e.msg,e.result)}).catch()})},showAddDialog:function(){this.dialogVisible=!0,this.action="add"},validate:function(){var t=this;this.$refs.data.validate(function(e){if(e)switch(t.action){case"add":t.addCategory();break;default:t.modify()}})},dialogClose:function(){this.resetData()},setData:function(t){var e=void 0;for(e in this.data)this.data[e]=null===t[e]?"":t[e]},resetData:function(){var t=void 0;this.$refs.data.resetFields();for(t in this.data)this.data[t]="";this.action=""},getList:function(){var t=this;return new r.default(function(e,a){(0,o.default)({url:"/admin/trademapauto",method:"get",params:t.categoryQuery}).then(function(e){e.result&&(t.tableData=e.data.data,t.total=e.data.page.count)}).catch()})},getCategory:function(t){var e=this;return new r.default(function(a,i){(0,o.default)({url:"admin/trademapauto/"+t,method:"get"}).then(function(t){t.result&&(e.setData(t.data),e.dialogVisible=!0)}).catch()})},deleteCategory:function(t){var e=this;return new r.default(function(a,i){(0,o.default)({url:"admin/trademapauto/"+t,method:"delete"}).then(function(t){t.result&&e.initData(),e.getMessage(t.msg,t.result)}).catch()})},showDeleteDialog:function(t){var e=this;this.$confirm("确认删除？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.deleteCategory(t)}).catch(function(){e.$message.info("操作取消")})},modify:function(){var t=this;return new r.default(function(e,a){(0,o.default)({url:"admin/trademapauto",method:"put",data:t.data}).then(function(e){e.result&&(t.dialogVisible=!1,t.initData()),t.getMessage(e.msg,e.result)}).catch()})},query:function(){var t=this;return new r.default(function(e,a){(0,o.default)({url:"admin/trademapauto/query",method:"get",params:t.categoryQuery}).then(function(e){e.result&&(t.tableData=e.data.data,t.total=e.data.page.count)}).catch()})},initData:function(){""===this.categoryQuery.queryStr?this.getList():this.query()},userPage:function(t){this.categoryQuery.pageNum=t,this.initData()},userPageSize:function(t){this.categoryQuery.pageSize=t,this.initData()},getMapping:function(){var t=this;return new r.default(function(e,a){(0,o.default)({url:"/admin/trademapping/1/query",method:"post",data:{page:{pageNum:1,pageSize:100}}}).then(function(e){e.result&&(t.mappingList=e.data.data)}).catch()})},enableDisable:function(t,e,a){var i=this;this.$confirm("要"+a+"此自动交易,是否继续",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a="admin/trademapauto/";1===t?i.enableDisableMatch(a+"forbid/"+e):2===t&&i.enableDisableMatch(a+"enable/"+e)}).catch(function(){i.$message.info("操作已取消")})},enableDisableMatch:function(t){var e=this;return new r.default(function(a,i){(0,o.default)({url:t,method:"put"}).then(function(t){e.getMessage(t.msg,t.result),e.initData()}).catch()})}}}}});
//# sourceMappingURL=37.e8187c253ccbfb367b4c.js.map